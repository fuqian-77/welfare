Ext.define("Ext.form.DecimalField",{extend:"Ext.form.field.Number",alias:"widget.decimalfield",alternateClassName:["Ext.form.DecimalField","Ext.form.NumberDec"],allowDecimals:true,decimalSeparator:".",decimalPrecision:2,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,step:1,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",negativeText:"The value cannot be negative",baseChars:"0123456789",autoStripChars:false,initComponent:function(){var a=this,b;a.callParent();a.setMinValue(a.minValue);a.setMaxValue(a.maxValue);if(a.disableKeyFilter!==true){b=a.baseChars+"";if(a.allowDecimals){b+=a.decimalSeparator;}if(a.minValue<0){b+="-";}b=Ext.String.escapeRegex(b);a.maskRe=new RegExp("["+b+"]");if(a.autoStripChars){a.stripCharsRe=new RegExp("[^"+b+"]","gi");}}},getErrors:function(c){var b=this,e=b.callParent(arguments),d=Ext.String.format,a;c=Ext.isDefined(c)?c:this.processRawValue(this.getRawValue());if(c.length<1){return e;}c=String(c).replace(b.decimalSeparator,".");if(isNaN(c)){e.push(d(b.nanText,c));}a=b.parseValue(c);if(b.minValue===0&&a<0){e.push(this.negativeText);}else{if(a<b.minValue){e.push(d(b.minText,b.minValue));}}if(a>b.maxValue){e.push(d(b.maxText,b.maxValue));}return e;},rawToValue:function(b){var a=this.fixPrecision(this.parseValue(b));if(a===null){a=b||null;}return a;},valueToRaw:function(d){var c=this,b=c.decimalSeparator;d=c.parseValue(d);d=c.fixPrecision(d);precision=c.decimalPrecision;if(d==null){d="0";}if(d=="0"&&precision>0){d+=".";for(var a=1;a<=precision;a++){d+="0";}}d=isNaN(d)?"":String(d).replace(".",b);return d;},onChange:function(){var b=this,c=b.getValue(),a=c===null;b.callParent(arguments);b.setSpinUpEnabled(a||c<b.maxValue);b.setSpinDownEnabled(a||c>b.minValue);},setMinValue:function(a){this.minValue=Ext.Number.from(a,Number.NEGATIVE_INFINITY);},setMaxValue:function(a){this.maxValue=Ext.Number.from(a,Number.MAX_VALUE);},parseValue:function(a){a=parseFloat(String(a).replace(this.decimalSeparator,"."));return isNaN(a)?null:a;},fixPrecision:function(d){var c=this,b=isNaN(d),a=c.decimalPrecision;if(!this.allowDecimals||a==-1||b||!d){return b?"":d;}return parseFloat(d).toFixed(a);},beforeBlur:function(){var b=this,a=b.parseValue(b.getRawValue());if(a==null||isNaN(a)){a="0";}if(!Ext.isEmpty(a)){b.setValue(a);}},setValue:function(a){a=typeof a=="number"?a:(String(a).replace(this.decimalSeparator,"."));a=isNaN(a)?"":String(a).replace(".",this.decimalSeparator);Ext.form.NumberField.superclass.setValue.call(this,a);},onSpinUp:function(){var me=this;if(!me.readOnly){me.setValue(Ext.Number.constrain(eval(me.getValue())+me.step,me.minValue,me.maxValue));}},onSpinDown:function(){var me=this;if(!me.readOnly){me.setValue(Ext.Number.constrain(eval(me.getValue())-me.step,me.minValue,me.maxValue));}}});