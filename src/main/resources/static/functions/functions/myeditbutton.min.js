Ext.define("Ext.ux.EditButton",{extend:"Ext.form.field.Trigger",alias:"widget.editbutton",requires:["Ext.button.Button"],buttonWidth:null,buttonText:"â€¦",buttonMargin:8,iconCls:"",triggerBaseCls:Ext.baseCSSPrefix+"btn",childEls:["buttonCell"],onRender:function(){var b=this,d=b.id;b.callParent(arguments);b.btn=Ext.create("Ext.button.Button",{renderTo:d+"-buttonCell",id:d+"-button",text:b.buttonText,iconCls:b.iconCls,width:b.buttonWidth,cls:b.triggerBaseCls+" "+Ext.baseCSSPrefix+"trigger-index-0 triggerCls",style:{marginLeft:b.buttonMargin}});var a=b.btn.width||b.btn.getWidth();if(a<=0){var c=new Ext.button.Button({renderTo:Ext.getBody(),text:b.buttonText,iconCls:b.iconCls});a=c.getWidth();Ext.removeNode(c.getEl().dom);}b.buttonCell.dom.style.width=b.btn.getEl().getMargin("lr")+a;if(Ext.isIE){b.btn.getEl().repaint();}},getTriggerMarkup:function(){var c=this;var b=Ext.dom.Element.unselectableCls;var a=[c.extraTriggerCls,Ext.baseCSSPrefix+"trigger-cell",b];return'<td id="'+c.id+'-buttonCell" class="'+a.join(" ")+'"></td>';},onTriggerWrapClick:function(){var d=this,e,b,a,c;c=arguments[d.triggerRepeater?1:0];if(c&&!d.disabled){e=c.getTarget("."+d.triggerBaseCls,null);b=e&&e.className.match(d.triggerIndexRe);if(b){a=d["onTrigger"+(parseInt(b[1],10)+1)+"Click"]||d.onTriggerClick;if(a){a.call(d,c);}}}},onTriggerClick:function(){var a=this;this.fireEvent("click",a);Ext.callback(this.handler,a,[a]);},setButtonText:function(c){c=c||"";var b=this,a=b.buttonText||"";if(c!=a){b.buttonText=c;if(b.rendered){b.btn.btnInnerEl.update(c||"&#160;");b.btn.setComponentCls();}b.updateLayout();}b.fireEvent("buttontextchange",b,a,c);return b;},setIconCls:function(b){b=b||"";var d=this,a=d.btn.btnIconEl,c=d.iconCls||"";d.iconCls=b;if(c!=b){if(a){a.removeCls(c);a.addCls(b);d.btn.setComponentCls();if(d.btn.didIconStateChange(c,b)){d.btn.updateLayout();d.updateLayout();}}d.fireEvent("iconchange",d,c,b);}return d;},setButtonMargin:function(c){var b=this;var a=b.buttonMargin;b.buttonMargin=c;if(b.rendered){b.buttonCell.setWidth(b.buttonCell.getWidth()+c-a);b.btn.el.setStyle("marginLeft",c);}},setButtonWidth:function(a){var b=this;b.buttonWidth=a;if(b.rendered){b.btn.setWidth(a);b.buttonCell.dom.style.width=b.btn.getEl().getMargin("lr")+b.btn.getWidth();}}});