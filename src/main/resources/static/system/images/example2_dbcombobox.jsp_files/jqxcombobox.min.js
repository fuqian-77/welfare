(function(b){b.jqx.jqxWidget("jqxComboBox","",{});b.extend(b.jqx._jqxComboBox.prototype,{defineInstance:function(){var a={disabled:false,width:200,height:25,items:new Array(),selectedIndex:-1,selectedItems:new Array(),_selectedItems:new Array(),source:null,scrollBarSize:b.jqx.utilities.scrollBarSize,arrowSize:18,enableHover:true,enableSelection:true,visualItems:new Array(),groups:new Array(),equalItemsWidth:true,itemHeight:-1,visibleItems:new Array(),emptyGroupText:"Group",emptyString:"",openDelay:250,closeDelay:300,animationType:"default",dropDownWidth:"auto",dropDownHeight:"200px",autoDropDownHeight:false,enableBrowserBoundsDetection:false,dropDownHorizontalAlignment:"left",searchMode:"startswithignorecase",autoComplete:false,remoteAutoComplete:false,remoteAutoCompleteDelay:500,selectionMode:"default",minLength:2,displayMember:"",valueMember:"",groupMember:"",searchMember:"",keyboardSelection:true,renderer:null,autoOpen:false,checkboxes:false,promptText:"",placeHolder:"",rtl:false,listBox:null,validateSelection:null,showCloseButtons:true,renderSelectedItem:null,search:null,popupZIndex:100000,searchString:null,multiSelect:false,showArrow:true,_disabledItems:new Array(),touchMode:"auto",autoBind:true,aria:{"aria-disabled":{name:"disabled",type:"boolean"}},events:["open","close","select","unselect","change","checkChange","bindingComplete"]};b.extend(true,this,a);return a;},createInstance:function(a){var d=this;this.host.attr("role","combobox");b.jqx.aria(this,"aria-autocomplete","both");if(b.jqx._jqxListBox==null||b.jqx._jqxListBox==undefined){throw new Error("jqxComboBox: Missing reference to jqxlistbox.js.");}b.jqx.aria(this);if(this.promptText!=""){this.placeHolder=this.promptText;}this.render();},render:function(){var v=this;var t=v.element.nodeName.toLowerCase();if(t=="select"||t=="ul"||t=="ol"){v.field=v.element;if(v.field.className){v._className=v.field.className;}var w={title:v.field.title};if(v.field.id.length){w.id=v.field.id.replace(/[^\w]/g,"_")+"_jqxComboBox";}else{w.id=b.jqx.utilities.createId()+"_jqxComboBox";}var F=b("<div></div>",w);if(!v.width){v.width=b(v.field).width();}if(!v.height){v.height=b(v.field).outerHeight();}b(v.field).hide().after(F);var y=v.host.data();v.host=F;v.host.data(y);v.element=F[0];v.element.id=v.field.id;v.field.id=w.id;if(v.field.tabIndex){var D=v.field.tabIndex;v.field.tabIndex=-1;v.element.tabIndex=D;}var H=b.jqx.parseSourceTag(v.field);v.source=H.items;if(v.selectedIndex==-1){v.selectedIndex=H.index;}}v.removeHandlers();v.isanimating=false;v.id=b.jqx.utilities.createId();v.element.innerHTML="";var C=b("<div style='background-color: transparent; -webkit-appearance: none; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; border: 0px; position: relative;'><div id='dropdownlistWrapper' style='padding: 0; margin: 0; border: none; background-color: transparent; float: left; width:100%; height: 100%; position: relative;'><div id='dropdownlistContent' style='padding: 0; margin: 0; border-top: none; border-bottom: none; float: left; position: absolute;'/><div id='dropdownlistArrow' role='button' style='padding: 0; margin: 0; border-left-width: 1px; border-bottom-width: 0px; border-top-width: 0px; border-right-width: 0px; float: right; position: absolute;'/></div></div>");v.comboStructure=C;if(b.jqx._jqxListBox==null||b.jqx._jqxListBox==undefined){throw"jqxComboBox: Missing reference to jqxlistbox.js.";}v.touch=b.jqx.mobile.isTouchDevice();if(v.touchMode===true){v.touch=true;}v.host.append(C);v.dropdownlistWrapper=v.host.find("#dropdownlistWrapper");v.dropdownlistArrow=v.host.find("#dropdownlistArrow");v.dropdownlistContent=v.host.find("#dropdownlistContent");v.dropdownlistContent.addClass(v.toThemeProperty("jqx-combobox-content"));v.dropdownlistContent.addClass(v.toThemeProperty("jqx-widget-content"));v.dropdownlistWrapper[0].id="dropdownlistWrapper"+v.element.id;v.dropdownlistArrow[0].id="dropdownlistArrow"+v.element.id;v.dropdownlistContent[0].id="dropdownlistContent"+v.element.id;v.dropdownlistContent.append(b('<input autocomplete="off" style="margin: 0; padding: 0; border: 0;" type="textarea"/>'));v.input=v.dropdownlistContent.find("input");v.input.addClass(v.toThemeProperty("jqx-combobox-input"));v.input.addClass(v.toThemeProperty("jqx-widget-content"));if(v.host.attr("tabindex")){v.input.attr("tabindex",v.host.attr("tabindex"));v.host.removeAttr("tabindex");}v._addInput();if(v.rtl){v.input.css({direction:"rtl"});v.dropdownlistContent.addClass(v.toThemeProperty("jqx-combobox-content-rtl"));}try{var e="listBox"+v.id;var A=b(b.find("#"+e));if(A.length>0){A.remove();}b.jqx.aria(this,"aria-owns",e);b.jqx.aria(this,"aria-haspopup",true);b.jqx.aria(this,"aria-multiline",false);if(v.listBoxContainer){v.listBoxContainer.jqxListBox("destroy");}if(v.container){v.container.remove();}var G=b("<div style='overflow: hidden; border: none; background-color: transparent; position: absolute;' id='listBox"+v.id+"'><div id='innerListBox"+v.id+"'></div></div>");G.hide();G.appendTo(document.body);v.container=G;v.listBoxContainer=b(b.find("#innerListBox"+v.id));var E=v.width;if(v.dropDownWidth!="auto"){E=v.dropDownWidth;}if(v.dropDownHeight==null){v.dropDownHeight=200;}v.container.width(parseInt(E)+25);v.container.height(parseInt(v.dropDownHeight)+25);v.addHandler(v.listBoxContainer,"bindingComplete",function(c){if(!v.listBox){v.listBox=b.data(v.listBoxContainer[0],"jqxListBox").instance;}v._raiseEvent("6");});var z=true;v.listBoxContainer.jqxListBox({_checkForHiddenParent:false,allowDrop:false,allowDrag:false,checkboxes:v.checkboxes,emptyString:v.emptyString,autoBind:!v.remoteAutoComplete&&v.autoBind,renderer:v.renderer,rtl:v.rtl,itemHeight:v.itemHeight,selectedIndex:v.selectedIndex,incrementalSearch:false,width:E,scrollBarSize:v.scrollBarSize,autoHeight:v.autoDropDownHeight,height:v.dropDownHeight,groupMember:v.groupMember,searchMember:v.searchMember,displayMember:v.displayMember,valueMember:v.valueMember,source:v.source,theme:v.theme,rendered:function(){v.listBox=b.data(v.listBoxContainer[0],"jqxListBox").instance;if(v.remoteAutoComplete){if(v.autoDropDownHeight){v.container.height(v.listBox.virtualSize.height+25);v.listBoxContainer.height(v.listBox.virtualSize.height);v.listBox._arrange();}else{v.listBox._arrange();v.listBox.ensureVisible(0);v.listBox._renderItems();v.container.height(v.listBoxContainer.height()+25);}if(v.searchString!=undefined&&v.searchString.length>=v.minLength){var c=v.listBoxContainer.jqxListBox("items");if(c){if(c.length>0){if(!v.isOpened()){v.open();}}else{v.close();}}else{v.close();}}else{v.close();}}else{v.renderSelection("mouse");if(v.multiSelect){v.doMultiSelect(false);}}if(v.rendered){v.rendered();}}});v.listBoxContainer.css({position:"absolute",zIndex:v.popupZIndex,top:0,left:0});v.listBoxContainer.css("border-top-width","1px");v.listBoxContainer.addClass(v.toThemeProperty("jqx-popup"));if(b.jqx.browser.msie){v.listBoxContainer.addClass(v.toThemeProperty("jqx-noshadow"));}v.listBox=b.data(v.listBoxContainer[0],"jqxListBox").instance;v.listBox.enableSelection=v.enableSelection;v.listBox.enableHover=v.enableHover;v.listBox.equalItemsWidth=v.equalItemsWidth;v.listBox._arrange();v.addHandler(v.listBoxContainer,"unselect",function(c){if(!v.multiSelect){v._raiseEvent("3",{index:c.args.index,type:c.args.type,item:c.args.item});}});v.addHandler(v.listBoxContainer,"change",function(c){if(!v.multiSelect){v.selectedIndex=v.listBox.selectedIndex;v._raiseEvent("4",{index:c.args.index,type:c.args.type,item:c.args.item});}});if(v.animationType=="none"){v.container.css("display","none");}else{v.container.hide();}z=false;}catch(x){throw x;}var a=this;a.input.attr("disabled",a.disabled);var B=b.jqx.browser.msie&&b.jqx.browser.version<8;if(!B){a.input.attr("placeholder",a.placeHolder);}v.propertyChangeMap.disabled=function(g,d,f,c){if(c){g.host.addClass(a.toThemeProperty("jqx-combobox-state-disabled"));g.host.addClass(a.toThemeProperty("jqx-fill-state-disabled"));g.dropdownlistContent.addClass(a.toThemeProperty("jqx-combobox-content-disabled"));}else{g.host.removeClass(a.toThemeProperty("jqx-combobox-state-disabled"));g.host.removeClass(a.toThemeProperty("jqx-fill-state-disabled"));g.dropdownlistContent.removeClass(a.toThemeProperty("jqx-combobox-content-disabled"));}g.input.attr("disabled",g.disabled);b.jqx.aria(g,"aria-disabled",g.disabled);g.input.attr("disabled",g.disabled);};if(v.disabled){v.host.addClass(v.toThemeProperty("jqx-combobox-state-disabled"));v.host.addClass(v.toThemeProperty("jqx-fill-state-disabled"));v.dropdownlistContent.addClass(v.toThemeProperty("jqx-combobox-content-disabled"));}v.host.addClass(v.toThemeProperty("jqx-combobox-state-normal"));v.host.addClass(v.toThemeProperty("jqx-combobox"));v.host.addClass(v.toThemeProperty("jqx-rc-all"));v.host.addClass(v.toThemeProperty("jqx-widget"));v.host.addClass(v.toThemeProperty("jqx-widget-content"));v.dropdownlistArrowIcon=b("<div></div>");v.dropdownlistArrowIcon.addClass(v.toThemeProperty("jqx-icon-arrow-down"));v.dropdownlistArrowIcon.addClass(v.toThemeProperty("jqx-icon"));v.dropdownlistArrow.append(v.dropdownlistArrowIcon);v.dropdownlistArrow.addClass(v.toThemeProperty("jqx-combobox-arrow-normal"));v.dropdownlistArrow.addClass(v.toThemeProperty("jqx-fill-state-normal"));if(!v.rtl){v.dropdownlistArrow.addClass(v.toThemeProperty("jqx-rc-r"));}else{v.dropdownlistArrow.addClass(v.toThemeProperty("jqx-rc-l"));}v._setSize();v._updateHandlers();v.addHandler(v.input,"keyup.textchange",function(d){var c=v._search(d);if(v.cinput&&v.input){if(!v.displayMember){v.cinput[0].value=v.input[0].value;}else{v._updateInputSelection();}}});if(b.jqx.browser.msie&&b.jqx.browser.version<8){if(v.host.parents(".jqx-window").length>0){var u=v.host.parents(".jqx-window").css("z-index");G.css("z-index",u+10);v.listBoxContainer.css("z-index",u+10);}}if(v.checkboxes){v.input.attr("readonly",true);b.jqx.aria(this,"aria-readonly",true);}else{b.jqx.aria(this,"aria-readonly",false);}if(!v.remoteAutoComplete){v.searchString="";}},_addInput:function(){var a=this.host.attr("name");this.cinput=b("<input type='hidden'/>");this.host.append(this.cinput);if(a){this.cinput.attr("name",a);}},_updateInputSelection:function(){if(this.cinput){var j=new Array();if(this.selectedIndex==-1){this.cinput.val("");}else{var h=this.getSelectedItem();if(h!=null){this.cinput.val(h.value);j.push(h.value);}else{this.cinput.val(this.dropdownlistContent.text());}}if(this.checkboxes||this.multiSelect){if(!this.multiSelect){var a=this.getCheckedItems();}else{var a=this.getSelectedItems();}var g="";if(a!=null){for(var i=0;i<a.length;i++){if(i==a.length-1){g+=a[i].value;}else{g+=a[i].value+",";}j.push(a[i].value);}}this.cinput.val(g);}if(this.field&&this.cinput){if(this.field.nodeName.toLowerCase()=="select"){b.each(this.field,function(d,c){b(this).removeAttr("selected");this.selected=j.indexOf(this.value)>=0;if(this.selected){b(this).attr("selected",true);}});}else{b.each(this.items,function(d,c){b(this.originalItem.originalItem).removeAttr("data-selected");this.selected=j.indexOf(this.value)>=0;if(this.selected){b(this.originalItem.originalItem).attr("data-selected",true);}});}}}},_search:function(y){var H=this;if(y.keyCode==9){return;}if(H.searchMode=="none"||H.searchMode==null||H.searchMode=="undefined"){return;}if(y.keyCode==16||y.keyCode==17||y.keyCode==20){return;}if(H.checkboxes){return;}if(H.multiSelect){var x=b("<span style='visibility: hidden; white-space: nowrap;'>"+H.input.val()+"</span>");x.addClass(H.toThemeProperty("jqx-widget"));b(document.body).append(x);var B=x.width()+15;x.remove();if(B>H.host.width()){B=H.host.width();}if(B<25){B=25;}H.input.css("width",B+"px");if(H.selectedItems.length==0){H.input.css("width","100%");H.input.attr("placeholder",H.placeHolder);}else{H.input.attr("placeholder","");}var F=parseInt(this._findPos(H.host[0])[1])+parseInt(H.host.outerHeight())-1+"px";var w=b.jqx.mobile.isSafariMobileBrowser()||b.jqx.mobile.isWindowsPhone();if((w!=null&&w)){F=b.jqx.mobile.getTopPos(this.element)+parseInt(H.host.outerHeight());if(b("body").css("border-top-width")!="0px"){F=parseInt(F)-this._getBodyOffset().top+"px";}}H.container.css("top",F);var C=parseInt(H.host.height());H.dropdownlistArrow.height(C);}if(!H.isanimating){if(y.altKey&&y.keyCode==38){H.hideListBox("altKey");return false;}if(y.altKey&&y.keyCode==40){if(!H.isOpened()){H.showListBox("altKey");}return false;}}if(y.keyCode==37||y.keyCode==39){return false;}if(y.altKey||y.keyCode==18){return;}if(y.keyCode>=33&&y.keyCode<=40){return;}if(y.ctrlKey||H.ctrlKey){if(y.keyCode!=88&&y.keyCode!=86){return;}}var z=H.input.val();if(z.length==0&&!H.autoComplete){H.listBox.searchString=H.input.val();H.listBox.clearSelection();H.hideListBox("search");H.searchString=H.input.val();return;}if(H.remoteAutoComplete){var a=this;var v=function(){a.listBox.vScrollInstance.value=0;};if(z.length>=a.minLength){if(!y.ctrlKey&&!y.altKey){if(a.searchString!=z){var A=a.listBoxContainer.jqxListBox("source");if(A==null){a.listBoxContainer.jqxListBox({source:a.source});}if(H._searchTimer){clearTimeout(H._searchTimer);}if(y.keyCode!=13&&y.keyCode!=27){H._searchTimer=setTimeout(function(){v();if(a.autoDropDownHeight){a.listBox.autoHeight=true;}a.searchString=a.input.val();if(a.search!=null){a.search(a.input.val());}else{throw"'search' function is not defined";}},H.remoteAutoCompleteDelay);}}a.searchString=z;}}else{if(H._searchTimer){clearTimeout(H._searchTimer);}v();a.searchString="";a.listBoxContainer.jqxListBox({source:null});}return;}var a=this;if(z===a.searchString){return;}if(!(y.keyCode=="27"||y.keyCode=="13")){var J=H._updateItemsVisibility(z);var G=J.matchItems;var I=J.index;if(!H.autoComplete&&!H.removeAutoComplete){if(!H.multiSelect||(H.multiSelect&&I>=0)){H.listBox.selectIndex(I);var t=H.listBox.isIndexInView(I);if(!t){H.listBox.ensureVisible(I);}else{H.listBox._renderItems();}}}if(H.autoComplete&&G.length===0){H.hideListBox("search");}}if(y.keyCode=="13"){var E=H.container.css("display")=="block";if(E&&!H.isanimating){H.hideListBox("keyboard");H._oldvalue=H.listBox.selectedValue;return;}}else{if(y.keyCode=="27"){var E=H.container.css("display")=="block";if(E&&!H.isanimating){if(!D.multiSelect){var u=H.listBox.getVisibleItem(H._oldvalue);if(u){var D=this;setTimeout(function(){if(D.autoComplete){D._updateItemsVisibility("");}D.listBox.selectIndex(u.index);D.renderSelection("api");},D.closeDelay);}else{H.clearSelection();}}else{D.input.val("");D.listBox.selectedValue=null;}H.hideListBox("keyboard");H.renderSelection("api");y.preventDefault();return false;}}else{if(!H.isOpened()&&!H.opening&&!y.ctrlKey){if(H.listBox.visibleItems&&H.listBox.visibleItems.length>0){if(H.input.val()!=H.searchString&&H.searchString!=undefined&&I!=-1){H.showListBox("search");}}}H.searchString=H.input.val();if(H.searchString==""){if(!H.listBox.itemsByValue[""]){I=-1;if(!H.multiSelect){H.clearSelection();}}}var u=H.listBox.getVisibleItem(I);if(u!=undefined){H._updateInputSelection();}}}},val:function(f){if(!this.input){return"";}var e=function(c){for(var d in c){if(c.hasOwnProperty(d)){return false;}}if(typeof f=="number"){return false;}if(typeof f=="date"){return false;}if(typeof f=="boolean"){return false;}if(typeof f=="string"){return false;}return true;};if(e(f)||arguments.length==0){var a=this.getSelectedItem();if(a){return a.value;}return this.input.val();}else{var a=this.getItemByValue(f);if(a!=null){this.selectItem(a);}else{this.input.val(f);}return this.input.val();}},focus:function(){var d=this;var a=function(){d.input.focus();var c=d.input.val();d._setSelection(0,c.length);};a();setTimeout(function(){a();},10);},_setSelection:function(f,a){try{if("selectionStart" in this.input[0]){this.input[0].focus();this.input[0].setSelectionRange(f,a);}else{var h=this.input[0].createTextRange();h.collapse(true);h.moveEnd("character",a);h.moveStart("character",f);h.select();}}catch(g){}},setContent:function(a){this.input.val(a);},_updateItemsVisibility:function(r){var u=this.getItems();if(u==undefined){return{index:-1,matchItem:new Array()};}var t=this;var w=-1;var q=new Array();var s=0;b.each(u,function(e){var c="";if(!this.isGroup){if(this.searchLabel){c=this.searchLabel;}else{if(this.label){c=this.label;}else{if(this.value){c=this.value;}else{if(this.title){c=this.title;}else{c="jqxItem";}}}}c=c.toString();var d=false;switch(t.searchMode){case"containsignorecase":d=b.jqx.string.containsIgnoreCase(c,r);break;case"contains":d=b.jqx.string.contains(c,r);break;case"equals":d=b.jqx.string.equals(c,r);break;case"equalsignorecase":d=b.jqx.string.equalsIgnoreCase(c,r);break;case"startswith":d=b.jqx.string.startsWith(c,r);break;case"startswithignorecase":d=b.jqx.string.startsWithIgnoreCase(c,r);break;case"endswith":d=b.jqx.string.endsWith(c,r);break;case"endswithignorecase":d=b.jqx.string.endsWithIgnoreCase(c,r);break;}if(t.autoComplete&&!d){this.visible=false;}if(d&&t.autoComplete){q[s++]=this;this.visible=true;w=this.visibleIndex;}if(r==""&&t.autoComplete){this.visible=true;d=false;}if(t.multiSelect){this.disabled=false;if(t.selectedItems.indexOf(this.value)>=0||t._disabledItems.indexOf(this.value)>=0){this.disabled=true;d=false;}}if(!t.multiSelect){if(d&&!t.autoComplete){w=this.visibleIndex;return false;}}else{if(d&&!t.autoComplete){if(w===-1){w=this.visibleIndex;}return true;}}}});this.listBox.searchString=r;var x=this;var v=function(){if(!x.multiSelect){return;}var f=0;var c=false;var d=null;for(var e=0;e<x.listBox.items.length;e++){x.listBox.selectedIndexes[e]=-1;if(!x.listBox.items[e].disabled){if(c==false){d=x.listBox.items[e];f=d.visibleIndex;c=true;}}}x.listBox.selectedIndex=-1;x.listBox.selectedIndex=f;x.listBox.selectedIndexes[f]=f;if(x.listBox.visibleItems.length>0){if(d){x.listBox.selectedValue=d.value;}else{x.listBox.selectedValue=null;}}else{x.listBox.selectedValue=null;}x.listBox.ensureVisible(0);};if(!this.autoComplete){v();return{index:w,matchItems:q};}this.listBox.renderedVisibleItems=new Array();var B=this.listBox.vScrollInstance.value;this.listBox.vScrollInstance.value=0;this.listBox.visibleItems=new Array();this.listBox._renderItems();var y=this.listBox.selectedValue;var a=this.listBox.getItemByValue(y);if(!this.multiSelect){if(a){if(a.visible){this.listBox.selectedIndex=a.visibleIndex;for(var z=0;z<this.listBox.items.length;z++){this.listBox.selectedIndexes[z]=-1;}this.listBox.selectedIndexes[a.visibleIndex]=a.visibleIndex;}else{for(var z=0;z<this.listBox.items.length;z++){this.listBox.selectedIndexes[z]=-1;}this.listBox.selectedIndex=-1;}}}else{v();}this.listBox._renderItems();var p=this.listBox._calculateVirtualSize().height;if(p<B){B=0;this.listBox.vScrollInstance.refresh();}if(this.autoDropDownHeight){this._disableSelection=true;if(this.listBox.autoHeight!=this.autoDropDownHeight){this.listBoxContainer.jqxListBox({autoHeight:this.autoDropDownHeight});}this.container.height(p+25);this.listBox.invalidate();this._disableSelection=false;}else{if(p<parseInt(this.dropDownHeight)){var A=this.listBox.hScrollBar[0].style.visibility=="hidden"?0:20;this.listBox.height=A+p;this.container.height(p+25+A);this.listBox.invalidate();}else{this.listBox.height=parseInt(this.dropDownHeight);this.container.height(parseInt(this.dropDownHeight)+25);this.listBox.invalidate();}}this.listBox.vScrollInstance.setPosition(B);return{index:w,matchItems:q};},findItems:function(h){var a=this.getItems();var i=this;var j=0;var g=new Array();b.each(a,function(e){var c="";if(!this.isGroup){if(this.label){c=this.label;}else{if(this.value){c=this.value;}else{if(this.title){c=this.title;}else{c="jqxItem";}}}var d=false;switch(i.searchMode){case"containsignorecase":d=b.jqx.string.containsIgnoreCase(c,h);break;case"contains":d=b.jqx.string.contains(c,h);break;case"equals":d=b.jqx.string.equals(c,h);break;case"equalsignorecase":d=b.jqx.string.equalsIgnoreCase(c,h);break;case"startswith":d=b.jqx.string.startsWith(c,h);break;case"startswithignorecase":d=b.jqx.string.startsWithIgnoreCase(c,h);break;case"endswith":d=b.jqx.string.endsWith(c,h);break;case"endswithignorecase":d=b.jqx.string.endsWithIgnoreCase(c,h);break;}if(d){g[j++]=this;}}});return g;},_resetautocomplete:function(){b.each(this.listBox.items,function(a){this.visible=true;});this.listBox.vScrollInstance.value=0;this.listBox._addItems();this.listBox.autoHeight=false;this.listBox.height=this.dropDownHeight;this.container.height(parseInt(this.dropDownHeight)+25);this.listBoxContainer.height(parseInt(this.dropDownHeight));this.listBox._arrange();this.listBox._addItems();this.listBox._renderItems();},getItems:function(){var a=this.listBox.items;return a;},getVisibleItems:function(){return this.listBox.getVisibleItems();},_setSize:function(){if(this.width!=null&&this.width.toString().indexOf("px")!=-1){this.host.width(this.width);}else{if(this.width!=undefined&&!isNaN(this.width)){this.host.width(this.width);}}if(this.height!=null&&this.height.toString().indexOf("px")!=-1){this.host.height(this.height);}else{if(this.height!=undefined&&!isNaN(this.height)){this.host.height(this.height);}}var f=false;if(this.width!=null&&this.width.toString().indexOf("%")!=-1){f=true;this.host.width(this.width);}if(this.height!=null&&this.height.toString().indexOf("%")!=-1){f=true;this.host.height(this.height);}if(f){var h=this;var a=this.host.width();if(this.dropDownWidth!="auto"){a=this.dropDownWidth;}this.listBoxContainer.jqxListBox({width:a});this.container.width(parseInt(a)+25);this._arrange();}var h=this;var g=function(){if(h.multiSelect){h.host.height(h.height);}h._arrange();if(h.multiSelect){h.host.height("auto");}};h.oldWidth=h.host.width();h.oldHeight=h.host.height();b.jqx.utilities.resize(this.host,function(){var d=h.host.width();var c=h.host.height();if(d!=h.oldWidth||c!=h.oldHeight){g();h.hideListBox("api");}h.oldWidth=d;h.oldHeight=c;});},isOpened:function(){var d=this;var a=b.data(document.body,"openedCombojqxListBox"+this.element.id);if(this.container.css("display")!="block"){return false;}if(a!=null&&a==d.listBoxContainer){return true;}return false;},_updateHandlers:function(){var g=this;var f=false;this.removeHandlers();if(this.multiSelect){this.addHandler(this.dropdownlistContent,"click",function(c){if(c.target.href){return false;}g.input.focus();setTimeout(function(){g.input.focus();},10);});this.addHandler(this.dropdownlistContent,"focus",function(c){if(c.target.href){return false;}g.input.focus();setTimeout(function(){g.input.focus();},10);});}if(!this.touch){if(this.host.parents()){this.addHandler(this.host.parents(),"scroll.combobox"+this.element.id,function(d){var c=g.isOpened();if(c){g.close();}});}this.addHandler(this.host,"mouseenter",function(){if(!g.disabled&&g.enableHover){f=true;g.host.addClass(g.toThemeProperty("jqx-combobox-state-hover"));g.dropdownlistArrowIcon.addClass(g.toThemeProperty("jqx-icon-arrow-down-hover"));g.dropdownlistArrow.addClass(g.toThemeProperty("jqx-combobox-arrow-hover"));g.dropdownlistArrow.addClass(g.toThemeProperty("jqx-fill-state-hover"));}});this.addHandler(this.host,"mouseleave",function(){if(!g.disabled&&g.enableHover){g.host.removeClass(g.toThemeProperty("jqx-combobox-state-hover"));g.dropdownlistArrowIcon.removeClass(g.toThemeProperty("jqx-icon-arrow-down-hover"));g.dropdownlistArrow.removeClass(g.toThemeProperty("jqx-combobox-arrow-hover"));g.dropdownlistArrow.removeClass(g.toThemeProperty("jqx-fill-state-hover"));f=false;}});}if(g.autoOpen){this.addHandler(this.host,"mouseenter",function(){var c=g.isOpened();if(!c&&g.autoOpen){g.open();g.host.focus();}});this.addHandler(b(document),"mousemove."+g.id,function(o){var p=g.isOpened();if(p&&g.autoOpen){var c=g.host.coord();var d=c.top;var e=c.left;var n=g.container.coord();var r=n.left;var q=n.top;canClose=true;if(o.pageY>=d&&o.pageY<=d+g.host.height()+2){if(o.pageX>=e&&o.pageX<e+g.host.width()){canClose=false;}}if(o.pageY>=q&&o.pageY<=q+g.container.height()-20){if(o.pageX>=r&&o.pageX<r+g.container.width()){canClose=false;}}if(canClose){g.close();}}});}var h="mousedown";if(this.touch){h=b.jqx.mobile.getTouchEventName("touchstart");}var a=function(c){if(!g.disabled){var e=g.container.css("display")=="block";if(!g.isanimating){if(e){g.hideListBox("api");if(!b.jqx.mobile.isTouchDevice()){g.input.focus();setTimeout(function(){g.input.focus();},10);}return true;}else{if(g.autoDropDownHeight){g.container.height(g.listBoxContainer.height()+25);var d=g.listBoxContainer.jqxListBox("autoHeight");if(!d){g.listBoxContainer.jqxListBox({autoHeight:g.autoDropDownHeight});g.listBox._arrange();g.listBox.ensureVisible(0);g.listBox._renderItems();g.container.height(g.listBoxContainer.height()+25);}}g.showListBox("api");if(!b.jqx.mobile.isTouchDevice()){setTimeout(function(){g.input.focus();},10);}else{return true;}}}}};this.addHandler(this.dropdownlistArrow,h,function(c){a(c);});this.addHandler(this.dropdownlistArrowIcon,h,function(c){});this.addHandler(this.host,"focus",function(){g.focus();});this.addHandler(this.input,"focus",function(c){g.focused=true;g.host.addClass(g.toThemeProperty("jqx-combobox-state-focus"));g.host.addClass(g.toThemeProperty("jqx-fill-state-focus"));g.dropdownlistContent.addClass(g.toThemeProperty("jqx-combobox-content-focus"));if(c.stopPropagation){c.stopPropagation();}if(c.preventDefault){c.preventDefault();}return false;});this.addHandler(this.input,"blur",function(){g.focused=false;if(!g.isOpened()&&!g.opening){if(g.selectionMode=="dropDownList"){g._selectOldValue();}g.host.removeClass(g.toThemeProperty("jqx-combobox-state-focus"));g.host.removeClass(g.toThemeProperty("jqx-fill-state-focus"));g.dropdownlistContent.removeClass(g.toThemeProperty("jqx-combobox-content-focus"));}if(g._searchTimer){clearTimeout(g._searchTimer);}});this.addHandler(b(document),"mousedown."+this.id,g.closeOpenedListBox,{me:this,listbox:this.listBox,id:this.id});if(this.touch){this.addHandler(b(document),b.jqx.mobile.getTouchEventName("touchstart")+"."+this.id,g.closeOpenedListBox,{me:this,listbox:this.listBox,id:this.id});}this.addHandler(this.host,"keydown",function(c){var l=g.container.css("display")=="block";g.ctrlKey=c.ctrlKey;if(g.host.css("display")=="none"){return true;}if(c.keyCode=="13"||c.keyCode=="9"){if(l&&!g.isanimating){if(g.listBox.selectedIndex!=-1){g.renderSelection("mouse");var n=g.listBox.selectedIndex;var d=g.listBox.getVisibleItem(n);if(d){g.listBox.selectedValue=d.value;}g._setSelection(g.input.val().length,g.input.val().length);g.hideListBox("keyboard");}if(c.keyCode=="13"){g._oldvalue=g.listBox.selectedValue;}if(!g.keyboardSelection){g._raiseEvent("2",{index:g.selectedIndex,type:"keyboard",item:g.getItem(g.selectedIndex)});}if(c.keyCode=="9"){return true;}return false;}}if(c.keyCode==115){if(!g.isanimating){if(!g.isOpened()){g.showListBox("keyboard");}else{if(g.isOpened()){g.hideListBox("keyboard");}}}return false;}if(c.altKey){if(g.host.css("display")=="block"){if(!g.isanimating){if(c.keyCode==38){if(g.isOpened()){g.hideListBox("altKey");}}else{if(c.keyCode==40){if(!g.isOpened()){g.showListBox("altKey");}}}}}}if(c.keyCode=="27"||c.keyCode=="9"){if(g.isOpened()&&!g.isanimating){if(c.keyCode=="27"){if(!g.multiSelect){var d=g.listBox.getItemByValue(g._oldvalue);if(d){setTimeout(function(){if(g.autoComplete){g._updateItemsVisibility("");}g.listBox.selectIndex(d.index);g.renderSelection("api");},g.closeDelay);}else{g.clearSelection();}}else{g.listBox.selectedValue=null;g.input.val("");}}g.hideListBox("keyboard");if(c.keyCode=="9"){return true;}g.renderSelection("api");c.preventDefault();return false;}}var m=c.keyCode;if(l&&!g.disabled&&m!=8){return g.listBox._handleKeyDown(c);}else{if(!g.disabled&&!l){var m=c.keyCode;if(m==33||m==34||m==35||m==36||m==38||m==40){return g.listBox._handleKeyDown(c);}}}if(m===8&&g.multiSelect){if(g.input.val().length===0){var e=g.selectedItems[g.selectedItems.length-1];g.selectedItems.pop();g._selectedItems.pop();if(e){g._raiseEvent("3",{index:e.index,type:"keyboard",item:e});g._raiseEvent("4",{index:e.index,type:"keyboard",item:e});}g.listBox.selectedValue=null;g.doMultiSelect();return false;}}});this.addHandler(this.listBoxContainer,"checkChange",function(c){g.renderSelection("mouse");g._updateInputSelection();g._raiseEvent(5,{label:c.args.label,value:c.args.value,checked:c.args.checked,item:c.args.item});});this.addHandler(this.listBoxContainer,"select",function(c){if(!g.disabled){if(c.args.type!="keyboard"||g.keyboardSelection){g.renderSelection(c.args.type);if(!g.multiSelect){g._raiseEvent("2",{index:c.args.index,type:c.args.type,item:c.args.item});}if(c.args.type=="mouse"){g._oldvalue=g.listBox.selectedValue;if(!g.checkboxes){g.hideListBox("mouse");if(!g.touch){g.input.focus();}else{return false;}}}}}});if(this.listBox!=null&&this.listBox.content!=null){this.addHandler(this.listBox.content,"click",function(c){if(!g.disabled){if(g.listBox.itemswrapper){if(c.target===g.listBox.itemswrapper[0]){return true;}}if(c.target&&c.target.className){if(c.target.className.indexOf("jqx-fill-state-disabled")>=0){return true;}}g.renderSelection("mouse");g._oldvalue=g.listBox.selectedValue;if(!g.touch&&!g.ishiding){if(!g.checkboxes){g.hideListBox("mouse");g.input.focus();}}if(g.touch===true){if(!g.checkboxes){g.hideListBox("mouse");}}}});}},_selectOldValue:function(){var a=this;if(a.listBox.selectedIndex==-1){if(!a.multiSelect){var d=a.listBox.getItemByValue(a._oldvalue);if(d){setTimeout(function(){if(a.autoComplete){a._updateItemsVisibility("");}a.listBox.selectIndex(d.index);a.renderSelection("api");},a.closeDelay);}else{a.clearSelection();a.listBox.selectIndex(0);a.renderSelection("api");}}else{a.listBox.selectedValue=null;a.input.val("");}}else{a.renderSelection("api");}},removeHandlers:function(){var d=this;if(this.dropdownlistWrapper!=null){this.removeHandler(this.dropdownlistWrapper,"mousedown");}if(this.dropdownlistContent){this.removeHandler(this.dropdownlistContent,"click");this.removeHandler(this.dropdownlistContent,"focus");}this.removeHandler(this.host,"keydown");this.removeHandler(this.host,"focus");if(this.input!=null){this.removeHandler(this.input,"focus");this.removeHandler(this.input,"blur");}this.removeHandler(this.host,"mouseenter");this.removeHandler(this.host,"mouseleave");this.removeHandler(b(document),"mousemove."+d.id);if(this.listBoxContainer){this.removeHandler(this.listBoxContainer,"checkChange");this.removeHandler(this.listBoxContainer,"select");}if(this.host.parents()){this.removeHandler(this.host.parents(),"scroll.combobox"+this.element.id);}if(this.dropdownlistArrowIcon&&this.dropdownlistArrow){var a="mousedown";if(this.touch){a=b.jqx.mobile.getTouchEventName("touchstart");}this.removeHandler(this.dropdownlistArrowIcon,a);this.removeHandler(this.dropdownlistArrow,a);}},getItem:function(a){var d=this.listBox.getItem(a);return d;},getItemByValue:function(d){var a=this.listBox.getItemByValue(d);return a;},getVisibleItem:function(a){var d=this.listBox.getVisibleItem(a);return d;},renderSelection:function(m){if(m==undefined||m=="none"){return;}if(this._disableSelection===true){return;}if(this.listBox==null){return;}if(this.multiSelect){return;}var i=this.listBox.visibleItems[this.listBox.selectedIndex];if(this.autoComplete&&!this.checkboxes){if(this.listBox.selectedValue!==undefined){var i=this.getItemByValue(this.listBox.selectedValue);}}if(this.checkboxes){var p=this.getCheckedItems();if(p!=null&&p.length>0){i=p[0];}else{i=null;}}if(i==null){var r=b.jqx.browser.msie&&b.jqx.browser.version<8;this.input.val("");this.input.attr("value","");if(!r){this.input.attr("placeholder",this.placeHolder);}this._updateInputSelection();return;}this.selectedIndex=this.listBox.selectedIndex;var s=b("<span></span>");if(i.label!=undefined&&i.label!=null&&i.label.toString().length>0){b.jqx.utilities.html(s,i.label);}else{if(i.value!=undefined&&i.value!=null&&i.value.toString().length>0){b.jqx.utilities.html(s,i.value);}else{if(i.title!=undefined&&i.title!=null&&i.title.toString().length>0){b.jqx.utilities.html(s,i.title);}else{b.jqx.utilities.html(s,this.emptyString);}}}var t=s.outerHeight();if(this.checkboxes){var o=this.getCheckedItems();var n="";for(var q=0;q<o.length;q++){if(q==o.length-1){n+=o[q].label;}else{n+=o[q].label+", ";}}this.input.val(n);}else{this.input.val(s.text());}s.remove();this._updateInputSelection();if(this.renderSelectedItem){var a=this.renderSelectedItem(this.listBox.selectedIndex,i);if(a!=undefined){this.input[0].value=a;}}this.input.attr("value",this.input.val());if(this.listBox&&this.listBox._activeElement){b.jqx.aria(this,"aria-activedescendant",this.listBox._activeElement.id);}},dataBind:function(){this.listBoxContainer.jqxListBox({source:this.source});this.renderSelection("mouse");if(this.source==null){this.clearSelection();}},clear:function(){this.listBoxContainer.jqxListBox({source:null});this.clearSelection();},clearSelection:function(a){this.selectedIndex=-1;this.listBox.clearSelection();this.input.val("");if(this.multiSelect){this.listBox.selectedValue="";this.selectedItems=new Array();this._selectedItems=new Array();this.doMultiSelect(false);}},unselectIndex:function(h,g){if(isNaN(h)){return;}if(this.autoComplete){this._updateItemsVisibility("");}this.listBox.unselectIndex(h,g);this.renderSelection("mouse");if(this.multiSelect){if(h>=0){var a=this.getItem(h);var f=this.selectedItems.indexOf(a.value);if(f>=0){if(a.value===this.listBox.selectedValue){this.listBox.selectedValue=null;}this.selectedItems.splice(f,1);this._selectedItems.splice(f,1);}}this.doMultiSelect(false);}},selectIndex:function(a,g,f,h){if(this.autoComplete){this._updateItemsVisibility("");}this.listBox.selectIndex(a,g,f,h);this.renderSelection("mouse");this.selectedIndex=a;if(this.multiSelect){this.doMultiSelect();}},selectItem:function(a){if(this.autoComplete){this._updateItemsVisibility("");}if(this.listBox!=undefined){this.listBox.selectedIndex=-1;this.listBox.selectItem(a);this.selectedIndex=this.listBox.selectedIndex;this.renderSelection("mouse");if(this.multiSelect){this.doMultiSelect(false);}}},unselectItem:function(e){if(this.autoComplete){this._updateItemsVisibility("");}if(this.listBox!=undefined){this.listBox.unselectItem(e);this.renderSelection("mouse");if(this.multiSelect){var a=this.getItemByValue(e);if(a){var f=this.selectedItems.indexOf(a.value);if(f>=0){if(a.value===this.listBox.selectedValue){this.listBox.selectedValue=null;}this.selectedItems.splice(f,1);this._selectedItems.splice(f,1);}}this.doMultiSelect(false);}}},checkItem:function(a){if(this.autoComplete){this._updateItemsVisibility("");}if(this.listBox!=undefined){this.listBox.checkItem(a);}},uncheckItem:function(a){if(this.autoComplete){this._updateItemsVisibility("");}if(this.listBox!=undefined){this.listBox.uncheckItem(a);}},indeterminateItem:function(a){if(this.autoComplete){this._updateItemsVisibility("");}if(this.listBox!=undefined){this.listBox.indeterminateItem(a);}},getSelectedValue:function(){return this.listBox.selectedValue;},getSelectedIndex:function(){if(!this.multiSelect){return this.listBox.selectedIndex;}else{if(this.remoteAutoComplete&&this.multiSelect&&this._selectedItems.length>0){return this.getSelectedItems()[0].index;}if(this._selectedItems&&this._selectedItems.length>0){return this.getSelectedItems()[0].index;}}},getSelectedItem:function(){if(!this.multiSelect){return this.getVisibleItem(this.listBox.selectedIndex);}else{if(this.remoteAutoComplete&&this.multiSelect&&this._selectedItems.length>0){return this.getSelectedItems()[0];}if(this._selectedItems&&this._selectedItems.length>0){return this.getSelectedItems()[0];}return null;}},getSelectedItems:function(){if(this.remoteAutoComplete&&this.multiSelect){return this._selectedItems;}var d=new Array();var a=this;b.each(this.selectedItems,function(){var c=a.getItemByValue(this);if(c){d.push(c);}else{var c=a._selectedItems[this];if(c){d.push(c);}}});return d;},getCheckedItems:function(){return this.listBox.getCheckedItems();},checkIndex:function(a){this.listBox.checkIndex(a);},uncheckIndex:function(a){this.listBox.uncheckIndex(a);},indeterminateIndex:function(a){this.listBox.indeterminateIndex(a);},checkAll:function(){this.listBox.checkAll();this.renderSelection("mouse");},uncheckAll:function(){this.listBox.uncheckAll();this.renderSelection("mouse");},insertAt:function(d,a){if(d==null){return false;}return this.listBox.insertAt(d,a);},addItem:function(a){return this.listBox.addItem(a);},removeAt:function(d){var a=this.listBox.removeAt(d);this.renderSelection("mouse");return a;},removeItem:function(d){var a=this.listBox.removeItem(d);this.renderSelection("mouse");return a;},updateItem:function(f,e){var a=this.listBox.updateItem(f,e);this.renderSelection("mouse");return a;},updateAt:function(e,f){var a=this.listBox.updateAt(e,f);this.renderSelection("mouse");return a;},ensureVisible:function(a){return this.listBox.ensureVisible(a);},disableAt:function(a){var d=this.getVisibleItem(a);if(d){this._disabledItems.push(d.value);}return this.listBox.disableAt(a);},enableAt:function(a){var d=this.getVisibleItem(a);if(d){this._disabledItems.splice(this._disabledItems.indexOf(d.value),1);}return this.listBox.enableAt(a);},disableItem:function(a){var a=this.getVisibleItem(a);if(a){this._disabledItems.push(a.value);}return this.listBox.disableItem(a);},enableItem:function(a){var a=this.getVisibleItem(a);if(a){this._disabledItems.splice(this._disabledItems.indexOf(a.value),1);}return this.listBox.enableItem(a);},_findPos:function(d){while(d&&(d.type=="hidden"||d.nodeType!=1||b.expr.filters.hidden(d))){d=d.nextSibling;}if(d){var a=b(d).coord(true);return[a.left,a.top];}},testOffset:function(l,n,q){var m=l.outerWidth();var a=l.outerHeight();var k=b(window).width()+b(window).scrollLeft();var o=b(window).height()+b(window).scrollTop();if(n.left+m>k){if(m>this.host.width()){var p=this.host.coord().left;var r=m-this.host.width();n.left=p-r+2;}}if(n.left<0){n.left=parseInt(this.host.coord().left)+"px";}n.top-=Math.min(n.top,(n.top+a>o&&o>a)?Math.abs(a+q+23):0);return n;},open:function(){if(!this.isOpened()&&!this.opening){this.showListBox("api");}},close:function(){if(this.isOpened()){this.hideListBox("api");}},_getBodyOffset:function(){var d=0;var a=0;if(b("body").css("border-top-width")!="0px"){d=parseInt(b("body").css("border-top-width"));if(isNaN(d)){d=0;}}if(b("body").css("border-left-width")!="0px"){a=parseInt(b("body").css("border-left-width"));if(isNaN(a)){a=0;}}return{left:a,top:d};},showListBox:function(E){if(this.listBox.items&&this.listBox.items.length==0){return;}if(E=="search"&&!this.autoComplete&&!this.remoteAutoComplete){if(this.autoDropDownHeight){this.container.height(this.listBoxContainer.height()+25);}}if(this.autoComplete||this.multiSelect&&!this.remoteAutoComplete){if(E!="search"){this._updateItemsVisibility("");if(this.multiSelect){var A=this.getVisibleItems();for(var w=0;w<A.length;w++){if(!A[w].disabled){this.ensureVisible(w);break;}}}}}if(this.remoteAutoComplete){this.listBox.clearSelection();}if(E!="search"){this._oldvalue=this.listBox.selectedValue;}b.jqx.aria(this,"aria-expanded",true);if(this.dropDownWidth=="auto"&&this.width!=null&&this.width.indexOf&&this.width.indexOf("%")!=-1){if(this.listBox.host.width()!=this.host.width()){var y=this.host.width();this.listBoxContainer.jqxListBox({width:y});this.container.width(parseInt(y)+25);}}var B=this;var H=this.listBoxContainer;var a=this.listBox;var K=b(window).scrollTop();var J=b(window).scrollLeft();var D=parseInt(this._findPos(this.host[0])[1])+parseInt(this.host.outerHeight())-1+"px";var L,z=parseInt(Math.round(this.host.coord(true).left));L=z+"px";var i=b.jqx.mobile.isSafariMobileBrowser()||b.jqx.mobile.isWindowsPhone();this.ishiding=false;var I=b.jqx.utilities.hasTransform(this.host);if(I||(i!=null&&i)){L=b.jqx.mobile.getLeftPos(this.element);D=b.jqx.mobile.getTopPos(this.element)+parseInt(this.host.outerHeight());if(b("body").css("border-top-width")!="0px"){D=parseInt(D)-this._getBodyOffset().top+"px";}if(b("body").css("border-left-width")!="0px"){L=parseInt(L)-this._getBodyOffset().left+"px";}}this.host.addClass(this.toThemeProperty("jqx-combobox-state-selected"));this.dropdownlistArrowIcon.addClass(this.toThemeProperty("jqx-icon-arrow-down-selected"));this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-combobox-arrow-selected"));this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-fill-state-pressed"));this.host.addClass(this.toThemeProperty("jqx-combobox-state-focus"));this.host.addClass(this.toThemeProperty("jqx-fill-state-focus"));this.dropdownlistContent.addClass(this.toThemeProperty("jqx-combobox-content-focus"));this.container.css("left",L);this.container.css("top",D);a._arrange();var M=true;var N=false;if(this.dropDownHorizontalAlignment=="right"||this.rtl){var F=this.container.outerWidth();var x=Math.abs(F-this.host.width());if(F>this.host.width()){this.container.css("left",25+parseInt(Math.round(z))-x+"px");}else{this.container.css("left",25+parseInt(Math.round(z))+x+"px");}}if(this.enableBrowserBoundsDetection){var G=this.testOffset(H,{left:parseInt(this.container.css("left")),top:parseInt(D)},parseInt(this.host.outerHeight()));if(parseInt(this.container.css("top"))!=G.top){N=true;H.css("top",23);H.addClass(this.toThemeProperty("jqx-popup-up"));}else{H.css("top",0);}this.container.css("top",G.top);this.container.css("top",G.top);if(parseInt(this.container.css("left"))!=G.left){this.container.css("left",G.left);}}if(this.animationType=="none"){this.container.css("display","block");b.data(document.body,"openedCombojqxListBoxParent",B);b.data(document.body,"openedCombojqxListBox"+B.element.id,H);H.css("margin-top",0);H.css("opacity",1);}else{this.container.css("display","block");var C=H.outerHeight();H.stop();if(this.animationType=="fade"){H.css("margin-top",0);H.css("opacity",0);H.animate({opacity:1},this.openDelay,function(){B.isanimating=false;B.opening=false;b.data(document.body,"openedCombojqxListBoxParent",B);b.data(document.body,"openedCombojqxListBox"+B.element.id,H);});}else{H.css("opacity",1);if(N){H.css("margin-top",C);}else{H.css("margin-top",-C);}this.isanimating=true;this.opening=true;H.animate({"margin-top":0},this.openDelay,function(){B.isanimating=false;B.opening=false;b.data(document.body,"openedCombojqxListBoxParent",B);b.data(document.body,"openedCombojqxListBox"+B.element.id,H);});}}a._renderItems();if(!N){this.host.addClass(this.toThemeProperty("jqx-rc-b-expanded"));H.addClass(this.toThemeProperty("jqx-rc-t-expanded"));this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-rc-b-expanded"));}else{this.host.addClass(this.toThemeProperty("jqx-rc-t-expanded"));H.addClass(this.toThemeProperty("jqx-rc-b-expanded"));this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-rc-t-expanded"));}H.addClass(this.toThemeProperty("jqx-fill-state-focus"));this._raiseEvent("0",a);},doMultiSelect:function(q){if(this.checkboxes){this.multiSelect=false;}var o=this;if(!this.multiSelect){var m=o.dropdownlistContent.find(".jqx-button");var p="mousedown";if(this.touch){p=b.jqx.mobile.getTouchEventName("touchstart");}this.removeHandler(m,p);this.removeHandler(m.find(".jqx-icon-close"),p);m.remove();this.selectedItems=new Array();this._selectedItems=new Array();return;}if(this.validateSelection){var a=this.validateSelection(this.listBox.selectedValue);if(!a){return;}}var l=this.selectedItems;if(this.listBox.selectedValue){if(this.selectedItems.indexOf(this.listBox.selectedValue)===-1){var i=this.getItemByValue(this.listBox.selectedValue);if(i&&i.visible){this.selectedItems.push(this.listBox.selectedValue);this._selectedItems.push(i);this._raiseEvent("2",{index:i.index,item:i});this._raiseEvent("4",{index:i.index,item:i});}}this.listBox.selectedIndex=0;}var n=this.listBox.items;if(!n){return;}for(var r=0;r<n.length;r++){n[r].disabled=false;if(this.selectedItems.indexOf(n[r].value)>=0||this._disabledItems.indexOf(this.value)>=0){n[r].disabled=true;}}this.listBox._renderItems();this.searchString="";this.input.val("");var n="";var p="mousedown";var m=o.dropdownlistContent.find(".jqx-button");if(this.touch){p=b.jqx.mobile.getTouchEventName("touchstart");}this.removeHandler(m,p);this.removeHandler(m.find(".jqx-icon-close"),p);m.remove();o.input.detach();if(this.selectedItems.length>0){o.input.css("width","25px");o.input.attr("placeholder","");}else{o.input.css("width","100%");o.input.attr("placeholder",this.placeHolder);}b.each(this.selectedItems,function(d){var j=o.getItemByValue(this);if(!j||o.remoteAutoComplete){j=o._selectedItems[d];}var g=b('<div style="overflow: hidden; float: left;"></div>');g.addClass(o.toThemeProperty("jqx-button"));g.addClass(o.toThemeProperty("jqx-combobox-multi-item"));g.addClass(o.toThemeProperty("jqx-fill-state-normal"));g.addClass(o.toThemeProperty("jqx-rc-all"));if(j){var f=j.label;if(o.renderSelectedItem){var e=o.renderSelectedItem(d,j);if(e){f=e;}}if(g[0].innerHTML==""){g[0].innerHTML='<a data-value="'+j.value+'" style="float: left;" href="#">'+f+"</a>";}if(o.rtl){g[0].innerHTML='<a data-value="'+j.value+'" style="float: right;" href="#">'+f+"</a>";}var h=!o.rtl?"right":"left";if(o.showCloseButtons){var c='<div style="position: relative; overflow: hidden; float: '+h+'; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px; float: none; width: 16px; height: 16px;" class="'+o.toThemeProperty("jqx-icon-close")+'"></div></div>';if(b.jqx.browser.msie&&b.jqx.browser.version<8){c='<div style="position: relative; overflow: hidden; float: left; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px; float: none; width: 16px; height: 16px;" class="'+o.toThemeProperty("jqx-icon-close")+'"></div></div>';}if(o.rtl){var c='<div style="position: relative; overflow: hidden; float: '+h+'; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-top: -7px; float: none; width: 16px; height: 16px;" class="'+o.toThemeProperty("jqx-icon-close")+'"></div></div>';if(b.jqx.browser.msie&&b.jqx.browser.version<8){c='<div style="position: relative; overflow: hidden; float: left; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-top: -7px; float: none; width: 16px; height: 16px;" class="'+o.toThemeProperty("jqx-icon-close")+'"></div></div>';}}g[0].innerHTML+=c;}}else{if(g[0].innerHTML==""){g[0].innerHTML='<a href="#"></a>';}}o.dropdownlistContent.append(g);});o.dropdownlistContent.append(o.input);o.input.val("");if(q!==false){o.input.focus();setTimeout(function(){o.input.focus();},10);}var m=o.dropdownlistContent.find(".jqx-button");if(this.touchMode===true){p="mousedown";}this.addHandler(m,p,function(d){if(d.target.className.indexOf("jqx-icon-close")>=0){return true;}if(o.disabled){return true;}var c=b(d.target).attr("data-value");var e=o.getItemByValue(c);if(e){o.listBox.selectedValue=null;o.listBox.clearSelection();}o.listBox.scrollTo(0,0);o.open();if(d.preventDefault){d.preventDefault();}if(d.stopPropagation){d.stopPropagation();}return false;});this.addHandler(m.find(".jqx-icon-close"),p,function(g){if(o.disabled){return;}var e=b(g.target).parent().parent().find("a").attr("data-value");var h=o.getItemByValue(e);if(h||(o.remoteAutoComplete&&!h&&o.selectedItems.indexOf(e)>=0)){o.listBox.selectedValue=null;var d=o.selectedItems.indexOf(e);var j=h&&h.index>=0?h.index:d;if(d>=0){o.selectedItems.splice(d,1);var f=o._selectedItems[d];if(!f){f=h;}o._selectedItems.splice(d,1);o._raiseEvent("3",{index:j,type:"mouse",item:f});o._raiseEvent("4",{index:j,type:"mouse",item:f});o.doMultiSelect();}else{for(var c=0;c<o.selectedItems.length;c++){var f=o.selectedItems[c];if(f==e){o.selectedItems.splice(c,1);o._selectedItems.splice(c,1);o._raiseEvent("3",{index:j,type:"mouse",item:h});o._raiseEvent("4",{index:j,type:"mouse",item:h});o.doMultiSelect();break;}}}}});o.dropdownlistArrow.height(this.host.height());o._updateInputSelection();},hideListBox:function(i){var k=this.listBoxContainer;var j=this.listBox;var n=this.container;if(this.container[0].style.display=="none"){return;}b.jqx.aria(this,"aria-expanded",false);if(i=="keyboard"||i=="mouse"){this.listBox.searchString="";}if(i=="keyboard"||i=="mouse"&&this.multiSelect){this.doMultiSelect();}var m=this;b.data(document.body,"openedCombojqxListBox"+this.element.id,null);if(this.animationType=="none"){this.opening=false;this.container.css("display","none");}else{if(!this.ishiding){var a=k.outerHeight();k.css("margin-top",0);k.stop();this.opening=false;this.isanimating=true;var l=-a;if(parseInt(this.container.coord().top)<parseInt(this.host.coord().top)){l=a;}if(this.animationType=="fade"){k.css({opacity:1});k.animate({opacity:0},this.closeDelay,function(){m.isanimating=false;n.css("display","none");m.ishiding=false;});}else{k.animate({"margin-top":l},this.closeDelay,function(){m.isanimating=false;n.css("display","none");m.ishiding=false;});}}}this.ishiding=true;this.host.removeClass(this.toThemeProperty("jqx-combobox-state-selected"));this.dropdownlistArrowIcon.removeClass(this.toThemeProperty("jqx-icon-arrow-down-selected"));this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-combobox-arrow-selected"));this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-fill-state-pressed"));if(!this.focused){this.host.removeClass(this.toThemeProperty("jqx-combobox-state-focus"));this.host.removeClass(this.toThemeProperty("jqx-fill-state-focus"));this.dropdownlistContent.removeClass(this.toThemeProperty("jqx-combobox-content-focus"));}this.host.removeClass(this.toThemeProperty("jqx-rc-b-expanded"));k.removeClass(this.toThemeProperty("jqx-rc-t-expanded"));this.host.removeClass(this.toThemeProperty("jqx-rc-t-expanded"));k.removeClass(this.toThemeProperty("jqx-rc-b-expanded"));k.removeClass(this.toThemeProperty("jqx-fill-state-focus"));this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-rc-t-expanded"));this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-rc-b-expanded"));this._raiseEvent("1",j);},closeOpenedListBox:function(j){var k=j.data.me;var a=b(j.target);var l=j.data.listbox;if(l==null){return true;}if(b(j.target).ischildof(j.data.me.host)){return;}var i=k;var h=false;b.each(a.parents(),function(){if(this.className!="undefined"){if(this.className.indexOf){if(this.className.indexOf("jqx-listbox")!=-1){h=true;return false;}if(this.className.indexOf("jqx-combobox")!=-1){if(k.element.id==this.id){h=true;}return false;}}}});if(l!=null&&!h){if(k.isOpened()){k.hideListBox("api");k.input.blur();}}return true;},loadFromSelect:function(a){this.listBox.loadFromSelect(a);this.clearSelection();},refresh:function(a){this._setSize();this._arrange();if(this.listBox){this.renderSelection();}},resize:function(){this._setSize();this._arrange();},_arrange:function(){var p=parseInt(this.host.width());var a=parseInt(this.host.height());var o=this.arrowSize;var n=this.arrowSize;var l=1;if(!this.showArrow){n=0;o=0;this.dropdownlistArrow.hide();l=0;this.host.css("cursor","arrow");}var r=p-n-1*l;if(r>0){this.dropdownlistContent[0].style.width=r+"px";}if(this.rtl){this.dropdownlistContent[0].style.width=(-1+r+"px");}this.dropdownlistContent[0].style.height=a+"px";this.dropdownlistContent[0].style.left="0px";this.dropdownlistContent[0].style.top="0px";this.dropdownlistArrow[0].style.width=n+1+"px";this.dropdownlistArrow[0].style.height=a+"px";this.dropdownlistArrow[0].style.left=1+r+"px";this.input[0].style.width="100%";if(!this.multiSelect){this.input.height(a);}var q=this.input.height();if(q==0){q=parseInt(this.input.css("font-size"))+3;}if(this.input[0].className.indexOf("jqx-rc-all")==-1){this.input.addClass(this.toThemeProperty("jqx-rc-all"));}var k=parseInt(a)/2-parseInt(q)/2;if(k>0){}if(this.rtl){this.dropdownlistArrow.css("left","0px");this.dropdownlistContent.css("left",this.dropdownlistArrow.width());if(b.jqx.browser.msie&&b.jqx.browser.version<=8){this.dropdownlistContent.css("left",1+this.dropdownlistArrow.width());}}if(this.multiSelect){this.input.css("float","left");this.dropdownlistWrapper.parent().css("height","auto");this.dropdownlistContent.css("height","auto");this.dropdownlistWrapper.css("height","auto");this.dropdownlistContent.css("position","relative");this.dropdownlistContent.css("cursor","text");this.host.css("height","auto");this.host.css("min-height",this.height);this.dropdownlistContent.css("min-height",this.height);var a=parseInt(this.host.height());this.dropdownlistArrow.height(a);var m=parseInt(this.host.css("min-height"));var k=parseInt(m)/2-parseInt(q)/2;if(k>0){this.input.css("margin-top",k);}}},destroy:function(){if(this.source&&this.source.unbindBindingUpdate){this.source.unbindBindingUpdate(this.element.id);this.source.unbindBindingUpdate(this.listBoxContainer[0].id);this.source.unbindDownloadComplete(this.element.id);this.source.unbindDownloadComplete(this.listBoxContainer[0].id);}b.jqx.utilities.resize(this.host,null,true);this.removeHandler(this.listBoxContainer,"select");this.removeHandler(this.listBoxContainer,"unselect");this.removeHandler(this.listBoxContainer,"change");this.removeHandler(this.listBoxContainer,"bindingComplete");this.removeHandler(this.dropdownlistWrapper,"selectstart");this.removeHandler(this.dropdownlistWrapper,"mousedown");this.removeHandler(this.host,"keydown");this.removeHandler(this.listBoxContainer,"select");this.removeHandler(this.listBox.content,"click");this.removeHandlers();this.removeHandler(this.input,"keyup.textchange");this.listBoxContainer.jqxListBox("destroy");this.listBoxContainer.remove();this.host.removeClass();this.removeHandler(b(document),"mousedown."+this.id,this.closeOpenedListBox);if(this.touch){this.removeHandler(b(document),b.jqx.mobile.getTouchEventName("touchstart")+"."+this.id);}this.cinput.remove();delete this.cinput;this.dropdownlistArrow.remove();delete this.dropdownlistArrow;this.dropdownlistArrowIcon.remove();delete this.dropdownlistArrowIcon;delete this.dropdownlistWrapper;delete this.listBoxContainer;delete this.input;delete this.dropdownlistContent;delete this.comboStructure;this.container.remove();delete this.listBox;delete this.container;var a=b.data(this.element,"jqxComboBox");if(a){delete a.instance;}this.host.removeData();this.host.remove();delete this.host;delete this.set;delete this.get;delete this.call;delete this.element;},_raiseEvent:function(g,j){if(j==undefined){j={owner:null};}var i=this.events[g];args=j;args.owner=this;var h=new b.Event(i);h.owner=this;if(g==2||g==3||g==4||g==5){h.args=j;}var a=this.host.trigger(h);return a;},propertyChangedHandler:function(a,j,g,h){if(a.isInitialized==undefined||a.isInitialized==false){return;}if(j=="itemHeight"){a.listBoxContainer.jqxListBox({itemHeight:h});}if(j=="renderSelectedItem"){a.renderSelection("mouse");}if(j=="renderer"){a.listBoxContainer.jqxListBox({renderer:h});}if(j=="enableSelection"){a.listBoxContainer.jqxListBox({enableSelection:h});}if(j=="enableHover"){a.listBoxContainer.jqxListBox({enableHover:h});}if(j==="touchMode"){a.listBoxContainer.jqxListBox({touchMode:h});a.touch=b.jqx.mobile.isTouchDevice();if(a.touchMode===true){a.touch=true;}a._updateHandlers();}if(j=="multiSelect"){if(h){a.doMultiSelect(false);}else{a.doMultiSelect(false);a.dropdownlistWrapper.parent().css("height","100%");a.dropdownlistContent.css("height","100");a.dropdownlistWrapper.css("height","100");a.dropdownlistContent.css("position","relative");a.host.css("min-height",null);a._setSize();a._arrange();}}if(j=="showArrow"){a._arrange();if(a.multiSelect){a.doMultiSelect(false);}}if(j=="placeHolder"){a.input.attr("placeholder",a.placeHolder);}if(j=="popupZIndex"){a.listBoxContainer.css({zIndex:a.popupZIndex});}if(j=="promptText"){a.placeHolder=h;}if(j=="autoOpen"){a._updateHandlers();}if(j=="renderer"){a.listBox.renderer=a.renderer;}if(j=="itemHeight"){a.listBox.itemHeight=h;}if(j=="source"){a.input.val("");a.listBoxContainer.jqxListBox({source:a.source});a.renderSelection("mouse");if(a.source==null){a.clearSelection();}if(a.multiSelect){a.selectedItems=new Array();a._selectedItems=new Array();a.doMultiSelect(false);}}if(j=="rtl"){if(h){a.dropdownlistArrow.css("float","left");a.dropdownlistContent.css("float","right");}else{a.dropdownlistArrow.css("float","right");a.dropdownlistContent.css("float","left");}a.listBoxContainer.jqxListBox({rtl:a.rtl});}if(j=="displayMember"||j=="valueMember"){a.listBoxContainer.jqxListBox({displayMember:a.displayMember,valueMember:a.valueMember});a.renderSelection("mouse");}if(j=="autoDropDownHeight"){a.listBoxContainer.jqxListBox({autoHeight:a.autoDropDownHeight});if(a.autoDropDownHeight){a.container.height(a.listBoxContainer.height()+25);}else{a.listBoxContainer.jqxListBox({height:a.dropDownHeight});a.container.height(parseInt(a.dropDownHeight)+25);}a.listBox._arrange();a.listBox._updatescrollbars();}if(j=="dropDownHeight"){if(!a.autoDropDownHeight){a.listBoxContainer.jqxListBox({height:a.dropDownHeight});a.container.height(parseInt(a.dropDownHeight)+25);}}if(j=="dropDownWidth"||j=="scrollBarSize"){var i=a.width;if(a.dropDownWidth!="auto"){i=a.dropDownWidth;}a.listBoxContainer.jqxListBox({width:i,scrollBarSize:a.scrollBarSize});a.container.width(parseInt(i)+25);}if(j=="autoComplete"){a._resetautocomplete();}if(j=="checkboxes"){a.listBoxContainer.jqxListBox({checkboxes:a.checkboxes});if(a.checkboxes){a.input.attr("readonly",true);b.jqx.aria(a,"aria-readonly",true);}else{b.jqx.aria(a,"aria-readonly",false);}}if(j=="theme"&&h!=null){a.listBoxContainer.jqxListBox({theme:h});a.listBoxContainer.addClass(a.toThemeProperty("jqx-popup"));if(b.jqx.browser.msie){a.listBoxContainer.addClass(a.toThemeProperty("jqx-noshadow"));}b.jqx.utilities.setTheme(g,h,a.host);}if(j=="rtl"){a.render();a.refresh();}if(j=="width"||j=="height"){a._setSize();if(j=="width"){if(a.dropDownWidth=="auto"){var i=a.host.width();a.listBoxContainer.jqxListBox({width:i});a.container.width(parseInt(i)+25);}}a._arrange();}if(j=="selectedIndex"){a.listBox.selectIndex(h);a.renderSelection("mouse");}}});})(jqxBaseFramework);