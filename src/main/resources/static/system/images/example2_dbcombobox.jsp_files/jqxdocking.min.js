(function(b){b.jqx.jqxWidget("jqxDocking","",{});b.extend(b.jqx._jqxDocking.prototype,{defineInstance:function(){var a={orientation:"horizontal",mode:"default",floatingWindowOpacity:0.3,panelsRoundedCorners:true,disabled:false,width:"auto",height:"auto",windowsMode:null,cookies:false,cookieOptions:{},windowsOffset:5,rtl:false,keyboardNavigation:false,_windowOptions:{},_draggedFired:false,_dragging:false,_draggingItem:null,_panels:[],_windows:[],_indicator:null,_events:["dragEnd","dragStart"]};b.extend(true,this,a);return a;},createInstance:function(){if(!this.host.jqxWindow){throw new Error("jqxDocking: Missing reference to jqxwindow.js.");}this._refresh(true);if(this.disabled){this.disabled=false;this.disable();}},refresh:function(a){if(!a){this._performLayout();}},_refresh:function(d){this._render();this._removeClasses();this._addClasses();this._setWindowsOptions(true);this._performLayout();this._cookieHandler();this._cookieExporter();this._removeEventListeners();this._addEventListeners();var a=b.Event("resize");this.host.trigger(a);},resize:function(){this._refresh();},_addClasses:function(){this.host.addClass("jqx-docking");for(var a=0;a<this._panels.length;a+=1){this._panels[a].addClass(this.toThemeProperty("jqx-docking-panel"));if(this.panelsRoundedCorners){this._panels[a].addClass(this.toThemeProperty("jqx-rc-all"));}}for(var a=0;a<this._windows.length;a+=1){this._windows[a].addClass(this.toThemeProperty("jqx-docking-window"));}},_removeClasses:function(){this.host.removeClass("jqx-docking");for(var a=0;a<this._panels.length;a+=1){this._panels[a].removeClass(this.toThemeProperty("jqx-docking-panel"));this._panels[a].removeClass(this.toThemeProperty("jqx-rc-all"));}for(var a=0;a<this._windows.length;a+=1){this._windows[a].removeClass(this.toThemeProperty("jqx-docking-window"));}},_render:function(){var a=this.host.children("div"),e;for(var f=0;f<a.length;f+=1){this._panels.push(b(a[f]));this._renderWindows(b(a[f]));}},focus:function(a){if(this.focusedWindow){b(this.focusedWindow).removeClass(this.toThemeProperty("jqx-fill-state-focus"));}if(!b.isEmptyObject(a)&&b.type(a)==="string"&&b("#"+a).length>0){this.focusedWindow=b("#"+a)[0];}else{this.focusedWindow=this._windows[0][0];}b(this.focusedWindow).addClass(this.toThemeProperty("jqx-fill-state-focus"));this.host.focus();},_renderWindows:function(a){var g=a.children("div");for(var i=0;i<g.length;i+=1){this._windows.push(b(g[i]));b(g[i]).jqxWindow({keyboardNavigation:false,rtl:this.rtl,theme:this.theme,enableResize:false,width:b(g[i]).css("width"),maxWidth:Number.MAX_VALUE});b(g[i]).detach();a.append(b(g[i]));}a.append('<div class="spacer" style="clear: both;"></div>');var h=this;if(this.keyboardNavigation){var j=function(c){if(c.keyCode===13){if(h.focusedWindow&&b(h.focusedWindow).jqxWindow("showCollapseButton")){b(h.focusedWindow).jqxWindow("_collapseButton").trigger("click");}}else{if((h.focusedWindow&&c.keyCode===27&&b(h.focusedWindow).jqxWindow("keyboardCloseKey")==="esc")||(h.focusedWindow&&b(h.focusedWindow).jqxWindow("keyboardCloseKey")==c.keyCode)){b(h.focusedWindow).jqxWindow("closeWindow",c);}}if(c.keyCode===9){if(h.focusedWindow==null){h.focusedWindow=h._windows[0];b(h.focusedWindow).focus();c.stopPropagation();}else{var e=-1;b.each(h._windows,function(l,f){if(this[0]==h.focusedWindow){e=l;}});if(c.shiftKey){e--;}else{e++;}if(e>=h._windows.length||e<0){b(h.focusedWindow).removeClass(h.toThemeProperty("jqx-fill-state-focus"));h.focusedWindow=null;c.stopPropagation();return true;}var d=h._windows[e];if(!d){d=h._windows[0];}b(h.focusedWindow).removeClass(h.toThemeProperty("jqx-fill-state-focus"));h.focusedWindow=d[0];b(h.focusedWindow).focus();}b(h.focusedWindow).addClass(h.toThemeProperty("jqx-fill-state-focus"));if(c.preventDefault){c.preventDefault();c.stopPropagation();}}};b.each(h._windows,function(d,c){var e=b(this);h.removeHandler(e,"focus");h.removeHandler(e,"blur");h.removeHandler(e,"mousedown");h.addHandler(e,"mousedown",function(f){if(h.focusedWindow){b(h.focusedWindow).removeClass(h.toThemeProperty("jqx-fill-state-focus"));}h.focusedWindow=e[0];b(h.focusedWindow).addClass(h.toThemeProperty("jqx-fill-state-focus"));b(h.focusedWindow).focus();});h.addHandler(e,"focus",function(f){if(h.focusedWindow){b(h.focusedWindow).removeClass(h.toThemeProperty("jqx-fill-state-focus"));}h.focusedWindow=e[0];b(h.focusedWindow).addClass(h.toThemeProperty("jqx-fill-state-focus"));});h.addHandler(e,"blur",function(f){if(b(document.activeElement).ischildof(b(e))){return true;}b(e).removeClass(h.toThemeProperty("jqx-fill-state-focus"));});h.removeHandler(e,"keydown");h.addHandler(e,"keydown",function(f){j(f);});});this.removeHandler(this.host,"keydown");this.addHandler(this.host,"keydown",function(c){j(c);});this.removeHandler(this.host,"blur");this.addHandler(this.host,"blur",function(c){if(h.focusedWindow){b(h.focusedWindow).removeClass(h.toThemeProperty("jqx-fill-state-focus"));h.focusedWindow=null;}});}},_performLayout:function(){this.host.css("width",this.width);this.host.css("height",this.height);this._performWindowsLayout();this._performPanelsLayout();this._performWindowsLayout();},_performPanelsLayout:function(){var a,f=this.host.width(),h=0;for(var g=0;g<this._panels.length;g+=1){a=this._panels[g];a.css("height","auto");a.css("min-width","auto");if(this.orientation==="vertical"){a.css("width","auto");a.css("float","none");}else{h+=this._handleHorizontalSize(a,h,f);if(g>0){a.css("margin-left",-this.windowsOffset);}}a.css("min-width",a.width());}if(this.orientation==="horizontal"){if(h<f){this._fillContainer(f,h);}}},_handleHorizontalSize:function(a,l,h){var j=h/this._panels.length,k,i=(a.outerWidth()-a.width());a.css("float","left");if(a.css("width")==="auto"||parseInt(a.css("width"),10)===0){a.width(j-i);}if(l+a.outerWidth()>=h){if(l+j<h){k=j-i;a.css("min-width",k);a.width(k);}else{k=a.width()-((l+a.outerWidth())-h);a.css("min-width",k);a.width(k);}}return a.outerWidth();},_fillContainer:function(g,a){var i=this._panels.length,h=this._panels[i-1],j=g-a+h.width();if(b.jqx.browser.msie&&b.jqx.browser.version<9){j-=this._panels.length;}h.width(j);},_performWindowsLayout:function(){var a;for(var d=0;d<this._windows.length;d+=1){a=this._getWindowOptions(this._windows[d]);if(this._windows[d].ischildof(this.host)){if(a){if(a.mode!=="floating"){this._windows[d].css("margin",this.windowsOffset);this._windows[d].css("position","static");}}else{if(this.mode!=="floating"){this._windows[d].css("position","static");this._windows[d].css("margin",this.windowsOffset);}}}this._setWindowSize(this._windows[d],a);}},_setWindowSize:function(e,f){if(f.mode!=="floating"){if(e.ischildof(this.host)){var a=e.parent().width()-(e.outerWidth()-e.width())-2*this.windowsOffset;if(this.orientation==="vertical"){e.jqxWindow("width",a);}else{e.jqxWindow("width",a);}}}this._setWindowOption(e,"size",{width:e.width(),height:e.height()});},_setWindowsOptions:function(a){for(var i=0;i<this._windows.length;i+=1){var h,l=this._windows[i].attr("id"),k=this._getWindowOptions(l);if(!a){var j="TEDX";}h=null;if(this.windowsMode&&this.windowsMode.hasOwnProperty(l)){h=this.windowsMode[l];this._setWindowOption(this._windows[i],"mode",h);}else{if(typeof k!=="undefined"&&typeof k.mode==="undefined"){h=this.mode;this._setWindowOption(this._windows[i],"mode",h);}}if(a){this._setWindowOption(this._windows[i],"resizable",true);if(h=="floating"){this._windows[i].jqxWindow({enableResize:true});}else{this._windows[i].jqxWindow({enableResize:false});}this._setWindowOption(this._windows[i],"size",{height:this._windows[i].height(),width:this._windows[i].width()});}}},_removeEventListeners:function(){for(var a=0;a<this._windows.length;a+=1){this.removeHandler(this._windows[a],"moving",this._itemDragging);this.removeHandler(this._windows[a],"moved",this._itemDrop);this.removeHandler(this._windows[a],"resized",this._itemResized);this.removeHandler(this._windows[a],"collapse",this._collapsed);this.removeHandler(this._windows[a],"expand",this._expanded);}},_addEventListeners:function(){for(var a=0;a<this._windows.length;a+=1){this._addEventListenersTo(this._windows[a]);}var d=this;b.jqx.utilities.resize(this.host,function(){d._performLayout();});},_addEventListenersTo:function(a){this.addHandler(a,"moving",this._itemDragging,{self:this});this.addHandler(a,"moved",this._itemDrop,{self:this});this.addHandler(a,"resized",this._itemResized,{self:this});this.addHandler(a,"collapse",this._collapsed,{self:this});this.addHandler(a,"expand",this._expanded,{self:this});},_itemDragging:function(h){var k=h.data.self,i=b(h.target),j=k._getWindowOptions(i);i.removeClass(k.toThemeProperty("jqx-docking-window"));i.css("margin","0px");if(!k._dragging){k._prepareForDragging(i);}if(j.mode==="floating"){return;}var a={x:h.args.pageX,y:h.args.pageY},l=k._getMouseOverPanel(a);if(l){k._mouseOverPanel(l,a);}else{k._mouseLeavePanel();}if(!k._draggedFired){k._raiseEvent(1,{window:b(i).attr("id")});k._draggedFired=true;}return true;},_prepareForDragging:function(d){this._dragging=true;var a={parent:d.parent(),next:d.next(),prev:d.prev()};this._setWindowOption(d,"lastPosition",a);d.detach();b(document.body).append(d);this._setDraggingStyles(d);this._draggingItem=d;},_setDraggingStyles:function(a){a.css({position:"absolute",left:a.offset().left,top:a.offset().top});a.fadeTo(0,this.floatingWindowOpacity);},_getMouseOverPanel:function(l){var j,a,h,i;for(var k=0;k<this._panels.length;k+=1){if(this._isMouseOverItem(this._panels[k],l,false)){return this._panels[k];}}return null;},_mouseOverPanel:function(j,a){if(this._dragging){var h=j.children("div"),i=this._getHoverWindow(a,h);if(i==="indicator"){return;}var g=this._centerOffset(i,a);this._handleIndicator(j,i,g);}},_getHoverWindow:function(n,k){var l,a,i,j;if(this._isMouseOverItem(this._indicator,n,true)){return"indicator";}for(var m=0;m<k.length;m+=1){if(this._isMouseOverItem(b(k[m]),n,true)){return b(k[m]);}}return null;},_centerOffset:function(i,a){if(i){var j={x:i.offset().left,y:i.offset().top},h=i.height(),k=i.width(),l;l=j.y+h/2;if(a.y>l){return"next";}return"prev";}return"all";},_handleIndicator:function(h,g,f){var a=this._getIndicator(g);if(f==="all"){if(this.orientation==="vertical"){a.insertBefore(h.children(".spacer"));}else{h.append(a);}}else{if(f==="prev"){a.insertBefore(g);}else{a.insertAfter(g);}}this._resizeIndicator(a,h);},_getIndicator:function(){var a=this._indicator;if(!a){a=b('<div class="'+this.toThemeProperty("jqx-docking-drop-indicator")+'"></div>');}this._indicator=a;this._indicator.css("margin",this.windowsOffset);if(this.orientation==="vertical"){this._indicator.css("float","left");}return a;},_resizeIndicator:function(d,a){if(this.orientation==="horizontal"){d.width(a.width()-(d.outerWidth(true)-d.width()));d.height(this._draggingItem.height());}else{d.width(this._draggingItem.width());d.height(this._draggingItem.height());}},_mouseLeavePanel:function(a){if(this._indicator){this._indicator.remove();this._indicator=null;}},_itemDrop:function(e){var a=e.data.self,f=b(e.currentTarget);a._dragging=false;if(a._indicator){f.detach();f.insertAfter(a._indicator);a._indicator.remove();a._dropFixer(f);}else{a._dropHandler(f);}f.fadeTo(0,1);f.focus();a._indicator=null;a._cookieExporter();a._draggedFired=false;a._raiseEvent(0,{window:f.attr("id")});},_dropFixer:function(a){a.css("position","static");a.addClass(this.toThemeProperty("jqx-docking-window"));a.css("margin",this.windowsOffset);a.jqxWindow("enableResize",false);if(this.orientation==="horizontal"){this._fixWindowSize(a);}},_dropHandler:function(d){var a=this._getWindowOptions(d);if(this.mode==="docked"){this._dropDocked(d);}else{this._dropFloating(d);}},_dropDocked:function(e){var f=this._getWindowOptions(e),a=f.lastPosition;e.detach();if(a.next[0]){e.insertBefore(a.next);}else{if(a.prev[0]){e.insertAfter(a.prev);}else{a.parent.append(e);}}this._dropFixer(e);},_fixWindowSize:function(a){b(a).jqxWindow({width:a.parent().width()-(a.outerWidth()-a.width())-2*parseInt(this.windowsOffset,10)});},_itemResized:function(e){var a=e.data.self,f=b(e.currentTarget);a._setWindowOption(f,"size",{width:e.args.width,height:e.args.height});a._cookieExporter();},_dropFloating:function(d){var a;if(!b(d).jqxWindow("collapsed")){a=this._getWindowOptions(d);b(d).jqxWindow("enableResize",a.resizable);}b(document.body).append(d);this._restoreWindowSize(d);},_restoreWindowSize:function(d){var a=this._getWindowOptions(d);b(d).jqxWindow({width:a.size.width});},_isMouseOverItem:function(k,o,p){if(!k){return false;}var a=k.outerWidth(true),m=k.outerHeight(true),r=k.width(),l=k.height(),n=k.offset().top,q=k.offset().left;if(p){n-=(m-l)/2;q-=(a-r)/2;r=a;l=m;}if((q<=o.x&&q+r>=o.x)&&(n<=o.y&&n+l+2*this._draggingItem.height()/3>=o.y)){return true;}return false;},_cookieHandler:function(){if(this.cookies){var a=b.jqx.cookie.cookie("jqxDocking"+this.element.id);if(a!==null){this.importLayout(a);layoutImported=true;}}},_cookieExporter:function(){if(this.cookies){b.jqx.cookie.cookie("jqxDocking"+this.element.id,this.exportLayout(),this.cookieOptions);}},_indexOf:function(f,e){for(var a=0;a<e.length;a+=1){if(f[0]===e[a][0]){return a;}}return -1;},_exportFixed:function(){var j=[],h="",a,i;for(var k=0;k<this._panels.length;k+=1){h+='"panel'+k+'": {';a=this._panels[k].children();for(var l=0;l<a.length;l+=1){i=b(a[l]);if(i.attr("id")){j.push(i);h+='"'+i.attr("id")+'":{"collapsed":'+i.jqxWindow("collapsed")+"},";}}if(a.length>1){h=h.substring(0,h.length-1);}h+="},";}h=h.substring(0,h.length-1);return{JSON:h,children:j};},_exportFloating:function(h){var f="",g;f+='"floating":{';for(var a=0;a<this._windows.length;a+=1){g=b(this._windows[a]);if(this._indexOf(g,h)===-1){f+='"'+g.attr("id")+'":{"x":"'+g.css("left")+'","y":"'+g.css("top")+'","width":"'+g.jqxWindow("width")+'","height":"'+g.jqxWindow("height")+'","collapsed":'+g.jqxWindow("collapsed")+"},";}}if(f.substring(f.length-1,f.length)===","){f=f.substring(0,f.length-1);}f+="}";return f;},_importFixed:function(a){for(var d in a){if(d!=="orientation"&&d!=="floating"&&a.hasOwnProperty(d)){order=d.substring(d.length-1,d.length);order=parseInt(order,10);children=a[d];for(var d in children){b("#"+d).css("position","static");if(children[d].collapsed){(function(c){setTimeout(function(){b("#"+c).jqxWindow("collapsed",true);},0);}(d));}this._panels[order].append(b("#"+d));if(this.orientation==="horizontal"){this._fixWindowSize(b("#"+d));}}}}},_importFloating:function(i){var g=i.floating,j,a;for(var h in g){if(g.hasOwnProperty(h)){b("#"+h).css("position","absolute");b(document.body).append(b("#"+h));a=this._dragging;b("#"+h).jqxWindow("move",g[h].x,g[h].y);this._dragging=a;b("#"+h).jqxWindow("width",g[h].width);b("#"+h).jqxWindow("height",g[h].height);b("#"+h).jqxWindow("enableResize",true);this._setWindowsOptions(true);(function(c){setTimeout(function(){b("#"+c).jqxWindow("collapsed",g[c].collapsed);},0);}(h));b("#"+h).fadeTo(0,1);}}},_getWindowOptions:function(a){if(typeof a==="object"&&a!==null){if(a.length>0){a=a.attr("id");}else{a=a.id;}}return this._windowOptions[a];},_setWindowOption:function(f,a,e){if(typeof f==="object"&&f!==null){if(f.length>0){f=f.attr("id");}else{f=f.id;}}if(typeof this._windowOptions[f]==="undefined"){this._windowOptions[f]={};}this._windowOptions[f][a]=e;if(a==="mode"){this.setWindowMode(f,e);}},_expanded:function(d){var a=d.data.self;a._cookieExporter();},_collapsed:function(d){var a=d.data.self;a._cookieExporter();},_raiseEvent:function(a){var d=b.Event(this._events[a]);d.args=arguments[1];return this.host.trigger(d);},_moveWindow:function(j,l,a){var k=l.children();var h=null;var i=0;b.each(k,function(c){if(b(this).css("position")=="static"){if(i==a&&this!=j[0]){h=this;}i++;}});if(i<=a){j.appendTo(l);}else{if(h!=null){j.insertBefore(h);}}j.css("position","static");},propertyChangedHandler:function(a,h,f,g){switch(h){case"rtl":b.each(a._windows,function(){this.jqxWindow({rtl:g});});break;case"theme":b.each(a._windows,function(){this.jqxWindow({theme:g});});break;case"orientation":case"height":case"width":a._performLayout();a._cookieExporter();break;case"panelsRoundedCorners":a._removeClasses();a._addClasses();break;case"disabled":if(g){a.disabled=false;a.disable();}else{a.disabled=true;a.enable();}break;case"windowsMode":case"mode":a._setWindowsOptions(false);break;case"cookies":a._cookieExporter();break;case"windowsOffset":a._performLayout();break;}},destroy:function(){this._removeEventListeners();this.host.remove();this.windowsMode=null;this.cookieOptions=null;this._windowOptions=null;this._panels=null;this._windows=null;this._events=null;},disable:function(){if(!this.disabled){this.disabled=true;this._removeEventListeners();for(var a=0;a<this._windows.length;a+=1){this._windows[a][0].style.opacity="";b(this._windows[a]).jqxWindow("disable");}}},enable:function(){if(this.disabled){this.disabled=false;this._addEventListeners();for(var a=0;a<this._windows.length;a+=1){b(this._windows[a]).jqxWindow("enable");}}},move:function(g,j,a){var j=this._panels[j];if(!j){return;}var h=b(j.children(".spacer")),i;h.detach();g=b("#"+g);i=this._getWindowOptions(g);if(i.mode==="floating"){return;}else{this._moveWindow(g,j,a);}j.append(h);this._cookieExporter();this._dropFixer(g);},exportLayout:function(){var d="{",a=this._exportFixed();d+=a.JSON+","+this._exportFloating(a.children)+',"orientation": "'+this.orientation+'"';d+="}";return d;},importLayout:function(e){try{var h=b.parseJSON(e),a,j;this.orientation=h.orientation;this._performLayout();this._importFixed(h);this._importFloating(h);}catch(i){alert("Invalid JSON string.");}},setWindowMode:function(f,e){var f=b("#"+f),a=this._getWindowOptions(f);if(e==="floating"){f.css("position","absolute");this._windowOptions[f.attr("id")]["mode"]=e;}else{if(a.mode==="floating"&&f.css("position")==="absolute"){if(a.lastPosition){this._dropDocked(f);}else{this._panels[0].append(f);this._dropFixer(f);}}}this._windowOptions[f.attr("id")]["mode"]=e;},hideCloseButton:function(a){b("#"+a).jqxWindow("showCloseButton",false);},showCloseButton:function(a){b("#"+a).jqxWindow("showCloseButton",true);},hideCollapseButton:function(a){b("#"+a).jqxWindow("showCollapseButton",false);},showCollapseButton:function(a){b("#"+a).jqxWindow("showCollapseButton",true);},expandWindow:function(a,d){b("#"+a).jqxWindow("expand",d);},collapseWindow:function(a,d){b("#"+a).jqxWindow("collapse",d);},setWindowProperty:function(f,a,e){b("#"+f).jqxWindow(a,e);},getWindowProperty:function(d,a){return b("#"+d).jqxWindow(a);},setWindowPosition:function(g,a,f){var g=b("#"+g),h=this._getWindowOptions(g);if(h.mode==="floating"){g.css("position","absolute");b(g).jqxWindow("move",a,f,null,false);}},hideAllCloseButtons:function(){for(var a=0;a<this._windows.length;a+=1){this._windows[a].jqxWindow("showCloseButton",false);}},hideAllCollapseButtons:function(){for(var a=0;a<this._windows.length;a+=1){this._windows[a].jqxWindow("showCollapseButton",false);}},showAllCloseButtons:function(){for(var a=0;a<this._windows.length;a+=1){this._windows[a].jqxWindow("showCloseButton",true);}},showAllCollapseButtons:function(){for(var a=0;a<this._windows.length;a+=1){this._windows[a].jqxWindow("showCollapseButton",true);}},pinWindow:function(a){b("#"+a).jqxWindow("draggable",false);},unpinWindow:function(a){b("#"+a).jqxWindow("draggable",true);},setDraggingMode:function(d){var a=b("#"+d);this._prepareForDragging(a);a.fadeTo(0,1);},enableWindowResize:function(a){a=b("#"+a);if(a.css("position")==="absolute"){this._setWindowOption(a,"resizable",true);a.jqxWindow("enableResize",true);}},disableWindowResize:function(a){a=b("#"+a);this._setWindowOption(a,"resizable",false);a.jqxWindow("enableResize",false);},addWindow:function(h,g,i,j){var a="#"+h;b(a).jqxWindow({keyboardNavigation:false,rtl:this.rtl,theme:this.theme,enableResize:false,width:b(a).css("width"),maxWidth:Number.MAX_VALUE});this._panels[0].append(b(a));this._windows.push(b(a));if(g){this._setWindowOption(b(a),"mode",g);}else{this._setWindowOption(b(a),"mode",this.mode);}this._setWindowOption(b(a),"resizable",true);this._setWindowOption(b(a),"size",{width:b(a).width(),height:b(a).height()});if(g=="floating"){b(a).jqxWindow({enableResize:true});}else{b(a).jqxWindow({enableResize:false});}if(this._panels[i]!=null){this._setWindowOption(b(a),"size",{width:this._panels[i].width(),height:this._panels[i].height()});}this._addEventListenersTo(b(a));if(typeof i!=="undefined"&&typeof j!=="undefined"){this.move(h,i,j);}this._dropFixer(b(a));},closeWindow:function(a){b("#"+a).jqxWindow("closeWindow");}});})(jqxBaseFramework);