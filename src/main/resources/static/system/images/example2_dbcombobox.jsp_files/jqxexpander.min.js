(function(b){b.jqx.jqxWidget("jqxExpander","",{});b.extend(b.jqx._jqxExpander.prototype,{defineInstance:function(){var a={width:"auto",height:"auto",expanded:true,expandAnimationDuration:259,collapseAnimationDuration:250,animationType:"slide",toggleMode:"click",showArrow:true,arrowPosition:"right",headerPosition:"top",disabled:false,initContent:null,rtl:false,easing:"easeInOutSine",aria:{"aria-disabled":{name:"disabled",type:"boolean"}},events:["expanding","expanded","collapsing","collapsed","resize"]};b.extend(true,this,a);return a;},createInstance:function(a){this._isTouchDevice=b.jqx.mobile.isTouchDevice();b.jqx.aria(this);this._cachedHTMLStructure=this.host.html();this.render();},expand:function(){if(this.disabled==false&&this.expanded==false&&this._expandChecker==1){var a=this;this._expandChecker=0;this._raiseEvent("0");this._header.removeClass(this.toThemeProperty("jqx-fill-state-normal"));this._header.addClass(this.toThemeProperty("jqx-fill-state-pressed"));this._header.addClass(this.toThemeProperty("jqx-expander-header-expanded"));if(this.headerPosition=="top"){this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down"));this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down-hover"));this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up-hover"));this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down-selected"));this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-top"));this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up"));this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up-selected"));this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-bottom"));this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-expanded"));}else{if(this.headerPosition=="bottom"){this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up"));this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up-selected"));this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down-hover"));this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up-hover"));this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-bottom"));this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down"));this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-top"));this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-expanded-top"));}}switch(this.animationType){case"slide":if(this.headerPosition=="top"){this._content.slideDown(this.expandAnimationDuration,this.easing,function(){a.expanded=true;b.jqx.aria(a._header,"aria-expanded",true);b.jqx.aria(a._content,"aria-hidden",false);a._raiseEvent("1");if(a.initContent&&a._initialized==false){a.initContent();a._initialized=true;}});}else{if(this.headerPosition=="bottom"){this._content.css({display:"inherit",height:0});if(b.jqx.browser.msie&&b.jqx.browser.version<8){this._content.css("display","block");}if(this._cntntEmpty==true){this._content.animate({height:0},this.expandAnimationDuration,this.easing,function(){a.expanded=true;b.jqx.aria(a._header,"aria-expanded",true);b.jqx.aria(a._content,"aria-hidden",false);a._raiseEvent("1");if(a.initContent&&a._initialized==false){a.initContent();a._initialized=true;}});}else{this._content.animate({height:this._contentHeight},this.expandAnimationDuration,this.easing,function(){a.expanded=true;b.jqx.aria(a._header,"aria-expanded",true);b.jqx.aria(a._content,"aria-hidden",false);a._raiseEvent("1");if(a.initContent&&a._initialized==false){a.initContent();a._initialized=true;}});}}}break;case"fade":this._content.fadeIn(this.expandAnimationDuration,this.easing,function(){a.expanded=true;b.jqx.aria(a._header,"aria-expanded",true);b.jqx.aria(a._content,"aria-hidden",false);a._raiseEvent("1");if(a.initContent&&a._initialized==false){a.initContent();a._initialized=true;}});break;case"none":this._content.css("display","inherit");this.expanded=true;b.jqx.aria(a._header,"aria-expanded",true);b.jqx.aria(a._content,"aria-hidden",false);this._raiseEvent("1");if(this.initContent&&this._initialized==false){this.initContent();this._initialized=true;}break;}}},collapse:function(){if(this.disabled==false&&this.expanded==true&&this._expandChecker==0){var a=this;this._expandChecker=1;this._raiseEvent("2");this._header.removeClass(this.toThemeProperty("jqx-fill-state-pressed"));this._header.removeClass(this.toThemeProperty("jqx-expander-header-expanded"));this._header.addClass(this.toThemeProperty("jqx-fill-state-normal"));if(this.headerPosition=="top"){this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up"));this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up-selected"));this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-bottom"));this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-expanded"));this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down"));if(a._hovered){this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down-hover"));}this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-top"));}else{if(this.headerPosition=="bottom"){this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down"));this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down-selected"));this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-top"));this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-expanded-top"));this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up"));this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-bottom"));if(a._hovered){this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up-hover"));}}}switch(this.animationType){case"slide":if(this.headerPosition=="top"){this._content.slideUp(this.collapseAnimationDuration,this.easing,function(){a.expanded=false;b.jqx.aria(a._header,"aria-expanded",false);b.jqx.aria(a._content,"aria-hidden",true);a._raiseEvent("3");});}else{if(this.headerPosition=="bottom"){this._content.animate({height:0},this.expandAnimationDuration,function(){a._content.css("display","none");a.expanded=false;b.jqx.aria(a._header,"aria-expanded",false);b.jqx.aria(a._content,"aria-hidden",true);a._raiseEvent("3");});}}break;case"fade":this._content.fadeOut(this.collapseAnimationDuration,this.easing,function(){a.expanded=false;b.jqx.aria(a._header,"aria-expanded",false);b.jqx.aria(a._content,"aria-hidden",true);a._raiseEvent("3");});break;case"none":this._content.css("display","none");this.expanded=false;b.jqx.aria(a._header,"aria-expanded",false);b.jqx.aria(a._content,"aria-hidden",true);this._raiseEvent("3");break;}}},setHeaderContent:function(a){this._header_text.html(a);this.invalidate();},getHeaderContent:function(){return this._header_text.html();},setContent:function(a){this._content.html(a);this._checkContent();this.invalidate();},getContent:function(){return this._content.html();},enable:function(){this.disabled=false;this.refresh();b.jqx.aria(this,"aria-disabled",false);},disable:function(){this.disabled=true;this.refresh();b.jqx.aria(this,"aria-disabled",true);},invalidate:function(){if(b.jqx.isHidden(this.host)){return;}this._setSize();},refresh:function(a){if(a==true){return;}this._removeHandlers();if(this.showArrow==true){this._arrow.css("display","inherit");}else{this._arrow.css("display","none");}this._setTheme();this._setSize();if(this.disabled==false){this._toggle();}this._keyBoard();},render:function(){this.widgetID=this.element.id;if(this._header){this._header.removeClass(this.toThemeProperty("jqx-expander-header-content"));this._header.removeClass(this.toThemeProperty("jqx-expander-header"));this._header.removeClass(this.toThemeProperty("jqx-expander-header-expanded"));this._header.removeClass(this.toThemeProperty("jqx-widget-header"));this._header_text.removeClass(this.toThemeProperty("jqx-expander-header-content"));this._header_text.removeClass(this.toThemeProperty("jqx-expander-header"));this._header_text.removeClass(this.toThemeProperty("jqx-widget-header"));this._header_text.removeClass(this.toThemeProperty("jqx-expander-header-expanded"));this._header.attr("tabindex",null);this._content.attr("tabindex",null);this._header.css("margin-top",0);this._header[0].innerHTML=this._header_text[0].innerHTML;if(this.headerPosition=="bottom"){this._header.detach();this.host.prepend(this._header);}}this._header_temp=this.host.children("div:eq(0)");this._header_temp.wrap("<div></div>");this._header=this.host.children("div:eq(0)");this._content=this.host.children("div:eq(1)");if(this.headerPosition=="bottom"){this._header.detach();this.host.append(this._header);}this._header_text=this._header.children("div:eq(0)");var g=this._header_text[0].className;this._header.addClass(g);this._header_text.removeClass();if(!this.rtl){this._header_text.addClass(this.toThemeProperty("jqx-expander-header-content"));}else{this._header_text.addClass(this.toThemeProperty("jqx-expander-header-content-rtl"));}this._header.append("<div></div>");this._arrow=this._header.children("div:eq(1)");if(this.showArrow==true){this._arrow.css("display","inherit");}else{this._arrow.css("display","none");}this.tI=-1;if(this._header.attr("tabindex")==undefined){this.tI++;this._header.attr("tabindex",this.tI);}if(this._content.attr("tabindex")==undefined){this.tI++;this._content.attr("tabindex",this.tI);}this._setTheme();this._checkContent();var a="Invalid jqxExpander structure. Please add only two child div elements to your jqxExpander div that will represent the expander's header and content.";try{if(this._header.length==0||this._content.length==0||this.host.children().length<2||this.host.children().length>2){throw a;}}catch(h){alert(h);}this._expandChecker;this._initialized;if(this.expanded==true){if(this.headerPosition=="top"){this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up"));this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up-selected"));this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-bottom"));this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-expanded"));}else{if(this.headerPosition=="bottom"){this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down"));this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down-selected"));this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-top"));this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-expanded-top"));}}if(this.initContent){this._setSize();this.initContent();}this._initialized=true;this._expandChecker=0;}else{if(this.expanded==false){this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down-selected"));this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up-selected"));if(this.headerPosition=="top"){this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down"));this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-top"));}else{if(this.headerPosition=="bottom"){this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up"));this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-bottom"));}}this._initialized=false;this._expandChecker=1;this._content.css("display","none");}}this._setSize();if(this.disabled==false){this._toggle();}this._keyBoard();var f=this;b.jqx.utilities.resize(this.host,function(){f.invalidate();});},destroy:function(){this.removeHandler(b(window),"resize.expander"+this.widgetID);this.host.remove();b(this.element).removeData("jqxExpander");},focus:function(){try{if(this.disabled==false){this._header.focus();}}catch(a){}},propertyChangedHandler:function(a,h,f,g){if(h=="expanded"){if(g==true&&f==false){this.expanded=false;this.expand();}else{if(g==false&&f==true){this.expanded=true;this.collapse();}}}else{this.refresh();}},_raiseEvent:function(h,j){var l=this.events[h];var i=new b.Event(l);i.owner=this;i.args=j;try{var a=this.host.trigger(i);}catch(k){}return a;},resize:function(d,a){this.width=d;this.height=a;this._setSize();},_setSize:function(){this.host.width(this.width);this.host.height(this.height);this._header.height("auto");this._header.css("min-height",this._arrow.height());var d=this.arrowPosition;if(this.rtl){switch(d){case"left":d="right";break;case"right":d="left";break;}}if(d=="right"){this._header_text.css({"float":"left","margin-left":"0px"});this._arrow.css({"float":"right",position:"relative"});}else{if(d=="left"){if(this.width=="auto"){this._header_text.css({"float":"left","margin-left":"17px"});this._arrow.css({"float":"left",position:"absolute"});}else{this._header_text.css({"float":"right","margin-left":"0px"});this._arrow.css({"float":"left",position:"relative"});}}}this._arrow.css("margin-top",this._header_text.height()/2-this._arrow.height()/2);if(this.height=="auto"){this._content.height("auto");this._contentHeight=this._content.height();}else{this._content.height("auto");var a=Math.round(this.host.height())-Math.round(this._header.outerHeight())-1;if(a<0){a=0;}if(!this._contentHeight){this._contentHeight=this._content.height();}if(a!=this._contentHeight){this._content.height(a);this._contentHeight=Math.round(this._content.outerHeight());}else{this._content.height(this._contentHeight);}}},_toggle:function(){var a=this;if(this._isTouchDevice==false){this._header.removeClass(this.toThemeProperty("jqx-expander-header-disabled"));switch(this.toggleMode){case"click":this.addHandler(this._header,"click.expander"+this.widgetID,function(){a._animate();});break;case"dblclick":this.addHandler(this._header,"dblclick.expander"+this.widgetID,function(){a._animate();});break;case"none":this._header.addClass(this.toThemeProperty("jqx-expander-header-disabled"));break;}}else{if(this.toggleMode!="none"){this.addHandler(this._header,b.jqx.mobile.getTouchEventName("touchstart")+"."+this.widgetID,function(){a._animate();});}else{return;}}},_animate:function(){if(this.expanded==true){this.collapse();this._header.addClass(this.toThemeProperty("jqx-fill-state-hover"));this._header.addClass(this.toThemeProperty("jqx-expander-header-hover"));if(this.headerPosition=="top"){this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-top-hover"));this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-down-hover"));}else{if(this.headerPosition=="bottom"){this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-bottom-hover"));this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-up-hover"));}}}else{this.expand();this._header.removeClass(this.toThemeProperty("jqx-fill-state-hover"));this._header.removeClass(this.toThemeProperty("jqx-expander-header-hover"));if(this.headerPosition=="top"){this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-top-hover"));this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-down-hover"));}else{if(this.headerPosition=="bottom"){this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-bottom-hover"));this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-up-hover"));}}}},_removeHandlers:function(){this.removeHandler(this._header,"click.expander"+this.widgetID);this.removeHandler(this._header,"dblclick.expander"+this.widgetID);this.removeHandler(this._header,"mouseenter.expander"+this.widgetID);this.removeHandler(this._header,"mouseleave.expander"+this.widgetID);},_setTheme:function(){var a=this;this.host.addClass(this.toThemeProperty("jqx-widget"));this._header.addClass(this.toThemeProperty("jqx-widget-header"));this._content.addClass(this.toThemeProperty("jqx-widget-content"));if(this.rtl==true){this.host.addClass(this.toThemeProperty("jqx-rtl"));}if(this.disabled==false){this._header.removeClass(this.toThemeProperty("jqx-expander-header-disabled"));this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"));if(this.expanded==true){this._header.addClass(this.toThemeProperty("jqx-fill-state-pressed"));this._header.addClass(this.toThemeProperty("jqx-expander-header-expanded"));}else{this._header.addClass(this.toThemeProperty("jqx-fill-state-normal"));this._header.removeClass(this.toThemeProperty("jqx-expander-header-expanded"));}this._hovered=false;if(!a._isTouchDevice){this.addHandler(this._header,"mouseenter.expander"+this.widgetID,function(){a._hovered=true;if(a._expandChecker==1){a._header.removeClass(a.toThemeProperty("jqx-fill-state-normal"));a._header.removeClass(a.toThemeProperty("jqx-fill-state-pressed"));a._header.addClass(a.toThemeProperty("jqx-fill-state-hover"));a._header.addClass(a.toThemeProperty("jqx-expander-header-hover"));if(a.headerPosition=="top"){if(a.expanded){a._arrow.addClass(a.toThemeProperty("jqx-icon-arrow-up-hover"));}else{a._arrow.addClass(a.toThemeProperty("jqx-icon-arrow-down-hover"));}a._arrow.addClass(a.toThemeProperty("jqx-expander-arrow-top-hover"));a._arrow.addClass(a.toThemeProperty("jqx-expander-arrow-down-hover"));}else{if(a.headerPosition=="bottom"){if(a.expanded){a._arrow.addClass(a.toThemeProperty("jqx-icon-arrow-down-hover"));}a._arrow.addClass(a.toThemeProperty("jqx-expander-arrow-bottom-hover"));a._arrow.addClass(a.toThemeProperty("jqx-expander-arrow-up-hover"));}}}});this.addHandler(this._header,"mouseleave.expander"+this.widgetID,function(){a._hovered=false;a._header.removeClass(a.toThemeProperty("jqx-fill-state-hover"));a._arrow.removeClass(a.toThemeProperty("jqx-icon-arrow-up-hover"));a._arrow.removeClass(a.toThemeProperty("jqx-icon-arrow-down-hover"));a._header.removeClass(a.toThemeProperty("jqx-expander-header-hover"));if(a.headerPosition=="top"){a._arrow.removeClass(a.toThemeProperty("jqx-expander-arrow-top-hover"));a._arrow.removeClass(a.toThemeProperty("jqx-expander-arrow-down-hover"));}else{if(a.headerPosition=="bottom"){a._arrow.removeClass(a.toThemeProperty("jqx-expander-arrow-bottom-hover"));a._arrow.removeClass(a.toThemeProperty("jqx-expander-arrow-up-hover"));}}if(a._expandChecker==1){a._header.addClass(a.toThemeProperty("jqx-fill-state-normal"));}else{a._header.addClass(a.toThemeProperty("jqx-fill-state-pressed"));}});}}else{this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));this._header.addClass(this.toThemeProperty("jqx-expander-header-disabled"));}this.host.addClass(this.toThemeProperty("jqx-expander"));this._header.addClass(this.toThemeProperty("jqx-expander-header"));this._content.addClass(this.toThemeProperty("jqx-expander-content"));if(this.headerPosition=="top"){this._content.addClass(this.toThemeProperty("jqx-expander-content-bottom"));}else{if(this.headerPosition=="bottom"){this._content.addClass(this.toThemeProperty("jqx-expander-content-top"));}}this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow"));},_checkContent:function(){this._cntntEmpty=/^\s*$/.test(this._content.html());if(this._cntntEmpty==true){this._content.height(0);this._content.addClass(this.toThemeProperty("jqx-expander-content-empty"));}else{this._content.height(this._contentHeight);this._content.removeClass(this.toThemeProperty("jqx-expander-content-empty"));}},_keyBoard:function(){var a=this;this._focus();this.addHandler(this.host,"keydown.expander"+this.widgetID,function(f){var e=false;if((a.focusedH==true||a.focusedC==true)&&a.disabled==false){switch(f.keyCode){case 13:case 32:if(a.toggleMode!="none"){if(a.focusedH==true){a._animate();}e=true;}break;case 38:if(f.ctrlKey==true&&a.focusedC==true){a._header.focus();}e=true;break;case 40:if(f.ctrlKey==true&&a.focusedH==true){a._content.focus();}e=true;break;}return true;}if(e&&f.preventDefault){f.preventDefault();}return !e;});},_focus:function(){var a=this;this.addHandler(this._header,"focus.expander"+this.widgetID,function(){a.focusedH=true;b.jqx.aria(a._header,"aria-selected",true);a._header.addClass(a.toThemeProperty("jqx-fill-state-focus"));});this.addHandler(this._header,"blur.expander"+this.widgetID,function(){a.focusedH=false;b.jqx.aria(a._header,"aria-selected",false);a._header.removeClass(a.toThemeProperty("jqx-fill-state-focus"));});this.addHandler(this._header_text,"focus.expander"+this.widgetID,function(){a._header.focus();});this.addHandler(this._arrow,"focus.expander"+this.widgetID,function(){a._header.focus();});this.addHandler(this._content,"focus.expander"+this.widgetID,function(){a.focusedC=true;a._content.addClass(a.toThemeProperty("jqx-fill-state-focus"));});this.addHandler(this._content,"blur.expander"+this.widgetID,function(){a.focusedC=false;a._content.removeClass(a.toThemeProperty("jqx-fill-state-focus"));});}});})(jqxBaseFramework);