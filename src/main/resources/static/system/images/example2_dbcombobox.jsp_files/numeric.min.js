(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a);}else{a(window.jQuery);}}(function(a){a.fn.numeric=function(d,f){if(typeof d==="boolean"){d={decimal:d,negative:true,decimalPlaces:-1};}d=d||{};if(typeof d.negative=="undefined"){d.negative=true;}var b=(d.decimal===false)?"":d.decimal||".";var c=(d.negative===true)?true:false;var e=(typeof d.decimalPlaces=="undefined")?-1:d.decimalPlaces;f=(typeof(f)=="function"?f:function(){});return this.data("numeric.decimal",b).data("numeric.negative",c).data("numeric.callback",f).data("numeric.decimalPlaces",e).keypress(a.fn.numeric.keypress).keyup(a.fn.numeric.keyup).blur(a.fn.numeric.blur);};a.fn.numeric.keypress=function(h){var g=a.data(this,"numeric.decimal");var d=a.data(this,"numeric.negative");var f=a.data(this,"numeric.decimalPlaces");var k=h.charCode?h.charCode:h.keyCode?h.keyCode:0;if(k==13&&this.nodeName.toLowerCase()=="input"){return true;}else{if(k==13){return false;}}var c=false;if((h.ctrlKey&&k==97)||(h.ctrlKey&&k==65)){return true;}if((h.ctrlKey&&k==120)||(h.ctrlKey&&k==88)){return true;}if((h.ctrlKey&&k==99)||(h.ctrlKey&&k==67)){return true;}if((h.ctrlKey&&k==122)||(h.ctrlKey&&k==90)){return true;}if((h.ctrlKey&&k==118)||(h.ctrlKey&&k==86)||(h.shiftKey&&k==45)){return true;}if(k<48||k>57){var i=a(this).val();if(a.inArray("-",i.split(""))!==0&&d&&k==45&&(i.length===0||parseInt(a.fn.getSelectionStart(this),10)===0)){return true;}if(g&&k==g.charCodeAt(0)&&a.inArray(g,i.split(""))!=-1){c=false;}if(k!=8&&k!=9&&k!=13&&k!=35&&k!=36&&k!=37&&k!=39&&k!=46){c=false;}else{if(typeof h.charCode!="undefined"){if(h.keyCode==h.which&&h.which!==0){c=true;if(h.which==46){c=false;}}else{if(h.keyCode!==0&&h.charCode===0&&h.which===0){c=true;}}}}if(g&&k==g.charCodeAt(0)){if(a.inArray(g,i.split(""))==-1){c=true;}else{c=false;}}}else{c=true;if(g&&f>0){var j=a.fn.getSelectionStart(this);var l=a.fn.getSelectionEnd(this);var b=a.inArray(g,a(this).val().split(""));if(j===l&&b>=0&&j>b&&a(this).val().length>b+f){c=false;}}}return c;};a.fn.numeric.keyup=function(s){var l=a(this).val();if(l&&l.length>0){var f=a.fn.getSelectionStart(this);var v=a.fn.getSelectionEnd(this);var r=a.data(this,"numeric.decimal");var n=a.data(this,"numeric.negative");var p=a.data(this,"numeric.decimalPlaces");if(r!==""&&r!==null){var d=a.inArray(r,l.split(""));if(d===0){this.value="0"+l;f++;v++;}if(d==1&&l.charAt(0)=="-"){this.value="-0"+l.substring(1);f++;v++;}l=this.value;}var c=[0,1,2,3,4,5,6,7,8,9,"-",r];var h=l.length;for(var q=h-1;q>=0;q--){var b=l.charAt(q);if(q!==0&&b=="-"){l=l.substring(0,q)+l.substring(q+1);}else{if(q===0&&!n&&b=="-"){l=l.substring(1);}}var g=false;for(var o=0;o<c.length;o++){if(b==c[o]){g=true;break;}}if(!g||b==" "){l=l.substring(0,q)+l.substring(q+1);}}var t=a.inArray(r,l.split(""));if(t>0){for(var m=h-1;m>t;m--){var u=l.charAt(m);if(u==r){l=l.substring(0,m)+l.substring(m+1);}}}if(r&&p>0){var d=a.inArray(r,l.split(""));if(d>=0){l=l.substring(0,d+p+1);v=Math.min(l.length,v);}}this.value=l;a.fn.setSelection(this,[f,v]);}};a.fn.numeric.blur=function(){var b=a.data(this,"numeric.decimal");var f=a.data(this,"numeric.callback");var c=a.data(this,"numeric.negative");var e=this.value;if(e!==""){var d=new RegExp(c?"-?":""+"^\\d+$|^\\d*"+b+"\\d+$");if(!d.exec(e)){f.apply(this);}}};a.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).data("numeric.decimalPlaces",null).unbind("keypress",a.fn.numeric.keypress).unbind("keyup",a.fn.numeric.keyup).unbind("blur",a.fn.numeric.blur);};a.fn.getSelectionStart=function(d){if(d.type==="number"){return undefined;}else{if(d.createTextRange&&document.selection){var b=document.selection.createRange().duplicate();b.moveEnd("character",d.value.length);if(b.text==""){return d.value.length;}return Math.max(0,d.value.lastIndexOf(b.text));}else{try{return d.selectionStart;}catch(c){return 0;}}}};a.fn.getSelectionEnd=function(c){if(c.type==="number"){return undefined;}else{if(c.createTextRange&&document.selection){var b=document.selection.createRange().duplicate();b.moveStart("character",-c.value.length);return b.text.length;}else{return c.selectionEnd;}}};a.fn.setSelection=function(f,d){if(typeof d=="number"){d=[d,d];}if(d&&d.constructor==Array&&d.length==2){if(f.type==="number"){f.focus();}else{if(f.createTextRange){var b=f.createTextRange();b.collapse(true);b.moveStart("character",d[0]);b.moveEnd("character",d[1]-d[0]);b.select();}else{f.focus();try{if(f.setSelectionRange){f.setSelectionRange(d[0],d[1]);}}catch(c){}}}}};}));